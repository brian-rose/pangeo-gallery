<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Generate missing C-grid coordinates &#8212; Pangeo Gallery  documentation</title>
    <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../../../_static/pangeo-style.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="https://netdna.bootstrapcdn.com/font-awesome/5.0.0/css/font-awesome.min.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/pangeo-gallery.css" />
    <script id="documentation_options" data-url_root="../../../" src="../../../_static/documentation_options.js"></script>
    <script src="../../../_static/jquery.js"></script>
    <script src="../../../_static/underscore.js"></script>
    <script src="../../../_static/doctools.js"></script>
    <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <script async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script type="text/x-mathjax-config">MathJax.Hub.Config({"tex2jax": {"inlineMath": [["$", "$"], ["\\(", "\\)"]], "processEscapes": true, "ignoreClass": "document", "processClass": "math|output_area"}})</script>
    <script src="https://unpkg.com/@jupyter-widgets/html-manager@^0.20.0/dist/embed-amd.js"></script>
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
    <link rel="prev" title="NEMO Example" href="04_nemo_idealized.html" />
<meta charset='utf-8'>
<meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1'>
<meta name="apple-mobile-web-app-capable" content="yes">
<script type="text/javascript" src="../../../_static/js/jquery-1.11.0.min.js "></script>
<script type="text/javascript" src="../../../_static/js/jquery-fix.js "></script>
<script type="text/javascript" src="../../../_static/bootstrap-3.3.7/js/bootstrap.min.js "></script>
<script type="text/javascript" src="../../../_static/bootstrap-sphinx.js "></script>

  </head><body>
<div id="navbar" class="navbar navbar-inverse navbar-default navbar-fixed-top">
  <div class="container">
    <div class="navbar-header">
      <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
      <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="../../../index.html">
          <span><img src="../../../_static/small_e_reversed_24px.png"></span>
        Pangeo Gallery</a>
    </div>

    <div class="collapse navbar-collapse nav-collapse">
      <ul class="nav navbar-nav">
      <li>
      <nav id="pangeo-breadcrumb" aria-label="breadcrumb">
        <ol class="breadcrumb">
          <li class="breadcrumb-item"><a href="index.html">Gallery for XGCM Examples and Usecases</a></li>
        
          <li class="breadcrumb-item active"><a href="#">Generate missing C-grid coordinates</a></li>
        
        </ol>
      </nav>
      </li>
      </ul>
    </div>

  </div>
</div>

<div class="container">
  <div class="row">
      <div class="col-md-3">
        <div id="sidebar" class="bs-sidenav" role="complementary">





<div class="badges" id="sidebar-header">
  <p><i class="fa fa-github fa-lg"></i> <a target="_blank" href="https://github.com/xgcm/xgcm-examples/blob/master/05_autogenerate.ipynb">xgcm/xgcm-examples/05_autogenerate.ipynb</a></p>
  <a target="_blank" href="https://binder.pangeo.io/v2/gh/pangeo-gallery/default-binder/53de928/?urlpath=git-pull?repo=https://github.com/xgcm/xgcm-examples%26amp%3Burlpath=lab/tree/xgcm-examples/05_autogenerate.ipynb%3Fautodecode"><img alt="Launch Binder" src="https://mybinder.org/badge_logo.svg?style=flat-square" /></a>
</div>

<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../../contributing.html">Contributor Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../NCAR/cesm-lens-aws/index.html">Gallery for CESM LENS on AWS</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../NCAR/ncar-gallery/index.html">NCAR Gallery</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../TomAugspurger/pangeo-dask-gateway/index.html">Pangeo &amp; Dask Gateway.</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../earthcube2020/ec20_abernathey_etal/index.html">Cloud Storage Benchmarks</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../pangeo-data/landsat-8-tutorial-gallery/index.html">Landsat 8 Tutorial</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../pangeo-data/pangeo-tutorial-gallery/index.html">Pangeo Tutorial Gallery</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../pangeo-gallery/cmip6/index.html">CMIP6 Gallery</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../pangeo-gallery/example-gallery/index.html">Example Gallery</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../pangeo-gallery/physical-oceanography/index.html">Physical Oceanography</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../rsignell-usgs/esip-gallery/index.html">ESIP Gallery</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Gallery for XGCM Examples and Usecases</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="01_eccov4.html">MITgcm ECCOv4 Example</a></li>
<li class="toctree-l2"><a class="reference internal" href="02_mitgcm.html">MITgcm Example</a></li>
<li class="toctree-l2"><a class="reference internal" href="03_MOM6.html">Getting started with xgcm for MOM6</a></li>
<li class="toctree-l2"><a class="reference internal" href="04_nemo_idealized.html">NEMO Example</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Generate missing C-grid coordinates</a></li>
</ul>
</li>
</ul>

        </div>
      </div>
    <div class="body col-md-9 content" role="main">
      
  
<style>
/* CSS for nbsphinx extension */

/* remove conflicting styling from Sphinx themes */
div.nbinput.container div.prompt *,
div.nboutput.container div.prompt *,
div.nbinput.container div.input_area pre,
div.nboutput.container div.output_area pre,
div.nbinput.container div.input_area .highlight,
div.nboutput.container div.output_area .highlight {
    border: none;
    padding: 0;
    margin: 0;
    box-shadow: none;
}

div.nbinput.container > div[class*=highlight],
div.nboutput.container > div[class*=highlight] {
    margin: 0;
}

div.nbinput.container div.prompt *,
div.nboutput.container div.prompt * {
    background: none;
}

div.nboutput.container div.output_area .highlight,
div.nboutput.container div.output_area pre {
    background: unset;
}

div.nboutput.container div.output_area div.highlight {
    color: unset;  /* override Pygments text color */
}

/* avoid gaps between output lines */
div.nboutput.container div[class*=highlight] pre {
    line-height: normal;
}

/* input/output containers */
div.nbinput.container,
div.nboutput.container {
    display: -webkit-flex;
    display: flex;
    align-items: flex-start;
    margin: 0;
    width: 100%;
}
@media (max-width: 540px) {
    div.nbinput.container,
    div.nboutput.container {
        flex-direction: column;
    }
}

/* input container */
div.nbinput.container {
    padding-top: 5px;
}

/* last container */
div.nblast.container {
    padding-bottom: 5px;
}

/* input prompt */
div.nbinput.container div.prompt pre {
    color: #307FC1;
}

/* output prompt */
div.nboutput.container div.prompt pre {
    color: #BF5B3D;
}

/* all prompts */
div.nbinput.container div.prompt,
div.nboutput.container div.prompt {
    width: 4.5ex;
    padding-top: 5px;
    position: relative;
    user-select: none;
}

div.nbinput.container div.prompt > div,
div.nboutput.container div.prompt > div {
    position: absolute;
    right: 0;
    margin-right: 0.3ex;
}

@media (max-width: 540px) {
    div.nbinput.container div.prompt,
    div.nboutput.container div.prompt {
        width: unset;
        text-align: left;
        padding: 0.4em;
    }
    div.nboutput.container div.prompt.empty {
        padding: 0;
    }

    div.nbinput.container div.prompt > div,
    div.nboutput.container div.prompt > div {
        position: unset;
    }
}

/* disable scrollbars on prompts */
div.nbinput.container div.prompt pre,
div.nboutput.container div.prompt pre {
    overflow: hidden;
}

/* input/output area */
div.nbinput.container div.input_area,
div.nboutput.container div.output_area {
    -webkit-flex: 1;
    flex: 1;
    overflow: auto;
}
@media (max-width: 540px) {
    div.nbinput.container div.input_area,
    div.nboutput.container div.output_area {
        width: 100%;
    }
}

/* input area */
div.nbinput.container div.input_area {
    border: 1px solid #e0e0e0;
    border-radius: 2px;
    /*background: #f5f5f5;*/
}

/* override MathJax center alignment in output cells */
div.nboutput.container div[class*=MathJax] {
    text-align: left !important;
}

/* override sphinx.ext.imgmath center alignment in output cells */
div.nboutput.container div.math p {
    text-align: left;
}

/* standard error */
div.nboutput.container div.output_area.stderr {
    background: #fdd;
}

/* ANSI colors */
.ansi-black-fg { color: #3E424D; }
.ansi-black-bg { background-color: #3E424D; }
.ansi-black-intense-fg { color: #282C36; }
.ansi-black-intense-bg { background-color: #282C36; }
.ansi-red-fg { color: #E75C58; }
.ansi-red-bg { background-color: #E75C58; }
.ansi-red-intense-fg { color: #B22B31; }
.ansi-red-intense-bg { background-color: #B22B31; }
.ansi-green-fg { color: #00A250; }
.ansi-green-bg { background-color: #00A250; }
.ansi-green-intense-fg { color: #007427; }
.ansi-green-intense-bg { background-color: #007427; }
.ansi-yellow-fg { color: #DDB62B; }
.ansi-yellow-bg { background-color: #DDB62B; }
.ansi-yellow-intense-fg { color: #B27D12; }
.ansi-yellow-intense-bg { background-color: #B27D12; }
.ansi-blue-fg { color: #208FFB; }
.ansi-blue-bg { background-color: #208FFB; }
.ansi-blue-intense-fg { color: #0065CA; }
.ansi-blue-intense-bg { background-color: #0065CA; }
.ansi-magenta-fg { color: #D160C4; }
.ansi-magenta-bg { background-color: #D160C4; }
.ansi-magenta-intense-fg { color: #A03196; }
.ansi-magenta-intense-bg { background-color: #A03196; }
.ansi-cyan-fg { color: #60C6C8; }
.ansi-cyan-bg { background-color: #60C6C8; }
.ansi-cyan-intense-fg { color: #258F8F; }
.ansi-cyan-intense-bg { background-color: #258F8F; }
.ansi-white-fg { color: #C5C1B4; }
.ansi-white-bg { background-color: #C5C1B4; }
.ansi-white-intense-fg { color: #A1A6B2; }
.ansi-white-intense-bg { background-color: #A1A6B2; }

.ansi-default-inverse-fg { color: #FFFFFF; }
.ansi-default-inverse-bg { background-color: #000000; }

.ansi-bold { font-weight: bold; }
.ansi-underline { text-decoration: underline; }


div.nbinput.container div.input_area div[class*=highlight] > pre,
div.nboutput.container div.output_area div[class*=highlight] > pre,
div.nboutput.container div.output_area div[class*=highlight].math,
div.nboutput.container div.output_area.rendered_html,
div.nboutput.container div.output_area > div.output_javascript,
div.nboutput.container div.output_area:not(.rendered_html) > img{
    padding: 5px;
    margin: 0;
}

/* fix copybtn overflow problem in chromium (needed for 'sphinx_copybutton') */
div.nbinput.container div.input_area > div[class^='highlight'],
div.nboutput.container div.output_area > div[class^='highlight']{
    overflow-y: hidden;
}

/* hide copybtn icon on prompts (needed for 'sphinx_copybutton') */
.prompt a.copybtn {
    display: none;
}

/* Some additional styling taken form the Jupyter notebook CSS */
div.rendered_html table {
  border: none;
  border-collapse: collapse;
  border-spacing: 0;
  color: black;
  font-size: 12px;
  table-layout: fixed;
}
div.rendered_html thead {
  border-bottom: 1px solid black;
  vertical-align: bottom;
}
div.rendered_html tr,
div.rendered_html th,
div.rendered_html td {
  text-align: right;
  vertical-align: middle;
  padding: 0.5em 0.5em;
  line-height: normal;
  white-space: normal;
  max-width: none;
  border: none;
}
div.rendered_html th {
  font-weight: bold;
}
div.rendered_html tbody tr:nth-child(odd) {
  background: #f5f5f5;
}
div.rendered_html tbody tr:hover {
  background: rgba(66, 165, 245, 0.2);
}
</style>
<div class="section" id="Generate-missing-C-grid-coordinates">
<h1>Generate missing C-grid coordinates<a class="headerlink" href="#Generate-missing-C-grid-coordinates" title="Permalink to this headline">¶</a></h1>
<p>Climate model output is usually provided with geometric information like the position of the cell center and boundaries. Gridded observational datasets often lack these informations and provide only the position of either the gridcell center or cell boundary.</p>
<p>This makes the calculation of common vector calculus operators like the gradient difficult, and results depend on the particular method used.</p>
<p><code class="docutils literal notranslate"><span class="pre">xgcm</span></code> can infer the cell boundary or cell center location depending on the geometry of the gridded source dataset. This enables consistent and easily reproducible calculations across model and observational datasets.</p>
<p>The <a class="reference external" href="api.rst#module-xgcm.autogenerate">autogenerate</a> module enables the user to apply the same methods to both model output and observational products, which enables better comparison and a unified workflow using different sources of data.</p>
<p>In this case xgcm can infer the missing coordinates to enable the creation of a grid object. Below we will illustrate how to infer coordinates for several example datasets (nonperiodic and periodic) and show how the resulting dataset can be used to perform common calculations like gradients and distance/area weighted averages on observational data.</p>
<div class="section" id="Non-periodic-1D-example:-Ocean-temperature-profile">
<h2>Non periodic 1D example: Ocean temperature profile<a class="headerlink" href="#Non-periodic-1D-example:-Ocean-temperature-profile" title="Permalink to this headline">¶</a></h2>
<p>First let’s import xarray and xgcm</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[1]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">xarray</span> <span class="k">as</span> <span class="nn">xr</span>
<span class="kn">from</span> <span class="nn">xgcm</span> <span class="kn">import</span> <span class="n">Grid</span>
<span class="kn">from</span> <span class="nn">xgcm.autogenerate</span> <span class="kn">import</span> <span class="n">generate_grid_ds</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
<span class="o">%</span><span class="k">matplotlib</span> inline
</pre></div>
</div>
</div>
<p>Below we will create a synthetic temperature profile with decreasing temperature at depth, with unevenly spaced depth intervals (commonly found in hydrographic data).</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[2]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="c1"># create a synthetic ocean temperature profile with uneven spacing in depth</span>
<span class="n">z</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">hstack</span><span class="p">([</span><span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">10</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span><span class="mi">200</span><span class="p">,</span> <span class="mi">10</span><span class="p">),</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">200</span><span class="p">,</span><span class="mi">700</span><span class="p">,</span> <span class="mi">20</span><span class="p">)])</span>
<span class="c1"># Create synthetic temperature profile with maximum temperature gradient at mid depth (e.g. the thermocline)</span>
<span class="n">temp</span> <span class="o">=</span> <span class="p">((</span><span class="n">np</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">pi</span><span class="o">*</span><span class="n">z</span><span class="o">/</span><span class="mi">700</span><span class="p">)</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span> <span class="o">+</span> <span class="n">np</span><span class="o">.</span><span class="n">exp</span><span class="p">(</span><span class="o">-</span><span class="n">z</span><span class="o">/</span><span class="mi">350</span><span class="p">)</span> <span class="o">/</span> <span class="mi">2</span><span class="p">)</span> <span class="o">*</span> <span class="mi">10</span>

<span class="c1"># Convert to xarray.Dataset</span>
<span class="n">ds</span> <span class="o">=</span> <span class="n">xr</span><span class="o">.</span><span class="n">DataArray</span><span class="p">(</span><span class="n">temp</span><span class="p">,</span> <span class="n">dims</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;depth&#39;</span><span class="p">],</span> <span class="n">coords</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;depth&#39;</span><span class="p">:</span><span class="n">z</span><span class="p">})</span><span class="o">.</span><span class="n">to_dataset</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;temperature&#39;</span><span class="p">)</span>

<span class="n">ds</span><span class="o">.</span><span class="n">temperature</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">y</span><span class="o">=</span><span class="s1">&#39;depth&#39;</span><span class="p">,</span> <span class="n">yincrease</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[2]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
[&lt;matplotlib.lines.Line2D at 0x7fa815aad5e0&gt;]
</pre></div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../../../_images/repos_xgcm_xgcm-examples_05_autogenerate_5_1.png" src="../../../_images/repos_xgcm_xgcm-examples_05_autogenerate_5_1.png" />
</div>
</div>
<div class="section" id="Infer-the-cell-boundaries-using-xgcm.autogenerate">
<h3>Infer the cell boundaries using xgcm.autogenerate<a class="headerlink" href="#Infer-the-cell-boundaries-using-xgcm.autogenerate" title="Permalink to this headline">¶</a></h3>
<p><a class="reference external" href="api.rst#xgcm.autogenerate.generate_grid_ds">generate_grid_ds</a> can infer the missing cell positions based on the given position (defaults to cell center) and the <a class="reference external" href="grids.rst#axes-and-positions">axis</a>, which is defined by passing a dictionary with the physical axis as key and the dataset dimensions belonging to that axis as values.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[3]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="c1"># Generate &#39;full&#39; dataset, which includes additional coordinate `depth_left` and appropriate attributes.</span>
<span class="n">ds_full</span> <span class="o">=</span> <span class="n">generate_grid_ds</span><span class="p">(</span><span class="n">ds</span><span class="p">,</span> <span class="p">{</span><span class="s1">&#39;Z&#39;</span><span class="p">:</span><span class="s1">&#39;depth&#39;</span><span class="p">})</span>
<span class="nb">print</span><span class="p">(</span><span class="n">ds_full</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">ds</span><span class="o">.</span><span class="n">depth</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">ds_full</span><span class="o">.</span><span class="n">depth_left</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
&lt;xarray.Dataset&gt;
Dimensions:      (depth: 53, depth_left: 53)
Coordinates:
  * depth        (depth) int64 1 2 3 4 5 6 7 8 ... 560 580 600 620 640 660 680
  * depth_left   (depth_left) float64 0.5 1.5 2.5 3.5 ... 630.0 650.0 670.0
Data variables:
    temperature  (depth) float64 24.99 24.97 24.96 24.94 ... 1.164 0.9193 0.7567
[  1   2   3   4   5   6   7   8   9  10  20  30  40  50  60  70  80  90
 100 110 120 130 140 150 160 170 180 190 200 220 240 260 280 300 320 340
 360 380 400 420 440 460 480 500 520 540 560 580 600 620 640 660 680]
[5.00e-01 1.50e+00 2.50e+00 3.50e+00 4.50e+00 5.50e+00 6.50e+00 7.50e+00
 8.50e+00 9.50e+00 1.50e+01 2.50e+01 3.50e+01 4.50e+01 5.50e+01 6.50e+01
 7.50e+01 8.50e+01 9.50e+01 1.05e+02 1.15e+02 1.25e+02 1.35e+02 1.45e+02
 1.55e+02 1.65e+02 1.75e+02 1.85e+02 1.95e+02 2.10e+02 2.30e+02 2.50e+02
 2.70e+02 2.90e+02 3.10e+02 3.30e+02 3.50e+02 3.70e+02 3.90e+02 4.10e+02
 4.30e+02 4.50e+02 4.70e+02 4.90e+02 5.10e+02 5.30e+02 5.50e+02 5.70e+02
 5.90e+02 6.10e+02 6.30e+02 6.50e+02 6.70e+02]
</pre></div></div>
</div>
<p>We see now that a new dimension <code class="docutils literal notranslate"><span class="pre">depth_left</span></code> was created, with cell boundaries shifted towards the surface</p>
<p>The default behaviour of <a class="reference external" href="api.rst#xgcm.autogenerate.generate_grid_ds">generate_grid_ds</a> is to extrapolate the grid position to the ‘left’ (e.g. towards the surface for a depth profile), assuming that the spacing in the two cells closest to the boundary (here: the first and second cell) is equal. Particular geometries might require adjustments of the boundary treatment, by specifying e.g. <code class="docutils literal notranslate"><span class="pre">pad=0</span></code> to ensure the topmost cell boundary is located at the sea surface.</p>
<p>Finally we can create the <a class="reference external" href="api.rst#xgcm.Grid">xgcm.Grid</a> object like we would from model output (see for example <a class="reference external" href="grids.rst#simple-grids">here</a>)</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[4]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="c1"># Create grid object</span>
<span class="n">grid</span> <span class="o">=</span> <span class="n">Grid</span><span class="p">(</span><span class="n">ds_full</span><span class="p">,</span> <span class="n">periodic</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">grid</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
&lt;xgcm.Grid&gt;
Z Axis (not periodic, boundary=None):
  * center   depth --&gt; left
  * left     depth_left --&gt; center
</pre></div></div>
</div>
</div>
<div class="section" id="Calculate-vertical-gradient">
<h3>Calculate vertical gradient<a class="headerlink" href="#Calculate-vertical-gradient" title="Permalink to this headline">¶</a></h3>
<p>Now we have all the tools we need to calculate the vertical gradient just like with numerical model output</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[5]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="c1"># Calculate vertical distances located on the cellboundary</span>
<span class="n">ds_full</span><span class="o">.</span><span class="n">coords</span><span class="p">[</span><span class="s1">&#39;dzc&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">grid</span><span class="o">.</span><span class="n">diff</span><span class="p">(</span><span class="n">ds_full</span><span class="o">.</span><span class="n">depth</span><span class="p">,</span> <span class="s1">&#39;Z&#39;</span><span class="p">,</span> <span class="n">boundary</span><span class="o">=</span><span class="s1">&#39;extrapolate&#39;</span><span class="p">)</span>
<span class="c1"># Calculate vertical distances located on the cellcenter</span>
<span class="n">ds_full</span><span class="o">.</span><span class="n">coords</span><span class="p">[</span><span class="s1">&#39;dzt&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">grid</span><span class="o">.</span><span class="n">diff</span><span class="p">(</span><span class="n">ds_full</span><span class="o">.</span><span class="n">depth_left</span><span class="p">,</span> <span class="s1">&#39;Z&#39;</span><span class="p">,</span> <span class="n">boundary</span><span class="o">=</span><span class="s1">&#39;extrapolate&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[6]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="c1"># note that the temperature gradient is located on the `depth_left` dimension,</span>
<span class="c1"># but no temperature information is available, to infer the gradient in the topmost grid cell.</span>
<span class="c1"># The following will pad with nan towards the surface. Alternatively the values could be padded with</span>
<span class="c1"># with a particular value or linearly extrapolated.</span>

<span class="n">dtemp_dz</span> <span class="o">=</span> <span class="n">grid</span><span class="o">.</span><span class="n">diff</span><span class="p">(</span><span class="n">ds</span><span class="o">.</span><span class="n">temperature</span><span class="p">,</span> <span class="s1">&#39;Z&#39;</span><span class="p">,</span> <span class="n">boundary</span><span class="o">=</span><span class="s1">&#39;fill&#39;</span><span class="p">,</span> <span class="n">fill_value</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">)</span> <span class="o">/</span> <span class="n">ds_full</span><span class="o">.</span><span class="n">dzc</span>
<span class="nb">print</span><span class="p">(</span><span class="n">dtemp_dz</span><span class="p">)</span>


<span class="n">fig</span><span class="p">,</span> <span class="n">ax1</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">()</span>
<span class="n">ax1</span><span class="o">.</span><span class="n">invert_yaxis</span><span class="p">()</span>
<span class="n">ax2</span> <span class="o">=</span> <span class="n">ax1</span><span class="o">.</span><span class="n">twiny</span><span class="p">()</span>

<span class="n">ds</span><span class="o">.</span><span class="n">temperature</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">ax</span><span class="o">=</span><span class="n">ax1</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="s1">&#39;depth&#39;</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;C0&#39;</span><span class="p">)</span>
<span class="n">ax1</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s1">&#39;temperature [deg C]&#39;</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;C0&#39;</span><span class="p">)</span>

<span class="n">dtemp_dz</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">ax</span><span class="o">=</span><span class="n">ax2</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="s1">&#39;depth_left&#39;</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;C1&#39;</span><span class="p">)</span>
<span class="n">ax2</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s1">&#39;vertical temperature gradient [deg C / m]&#39;</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;C1&#39;</span><span class="p">);</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
&lt;xarray.DataArray (depth_left: 53)&gt;
array([        nan, -0.01452675, -0.01468758, -0.01484852, -0.01500955,
       -0.01517068, -0.01533191, -0.01549322, -0.01565462, -0.01581609,
       -0.01670564, -0.01832588, -0.01994686, -0.02156426, -0.02317378,
       -0.02477119, -0.02635229, -0.02791296, -0.02944913, -0.03095681,
       -0.03243211, -0.0338712 , -0.03527037, -0.03662601, -0.0379346 ,
       -0.03919276, -0.04039723, -0.04154487, -0.04263268, -0.04413764,
       -0.04591988, -0.04741622, -0.04860995, -0.04948706, -0.05003634,
       -0.05024945, -0.05012097, -0.04964842, -0.04883232, -0.04767612,
       -0.04618617, -0.04437168, -0.04224465, -0.0398197 , -0.03711403,
       -0.0341472 , -0.030941  , -0.02751928, -0.02390771, -0.02013362,
       -0.01622573, -0.01221393, -0.00812903])
Coordinates:
  * depth_left  (depth_left) float64 0.5 1.5 2.5 3.5 ... 610.0 630.0 650.0 670.0
    dzc         (depth_left) int64 1 1 1 1 1 1 1 1 1 ... 20 20 20 20 20 20 20 20
</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[6]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
Text(0.5, 0, &#39;vertical temperature gradient [deg C / m]&#39;)
</pre></div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../../../_images/repos_xgcm_xgcm-examples_05_autogenerate_15_2.png" src="../../../_images/repos_xgcm_xgcm-examples_05_autogenerate_15_2.png" />
</div>
</div>
</div>
<div class="section" id="Depth-weighted-average">
<h3>Depth weighted average<a class="headerlink" href="#Depth-weighted-average" title="Permalink to this headline">¶</a></h3>
<p>Another common operation for many climate datasets is a weighted mean along an unevenly spaced dimension. Using the grid spacing for the tracer cells earlier this becomes trivial.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[7]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">mean_temp</span> <span class="o">=</span> <span class="n">ds_full</span><span class="o">.</span><span class="n">temperature</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="s1">&#39;depth&#39;</span><span class="p">)</span>
<span class="n">mean_temp_weighted</span> <span class="o">=</span> <span class="p">(</span><span class="n">ds_full</span><span class="o">.</span><span class="n">temperature</span> <span class="o">*</span> <span class="n">ds_full</span><span class="o">.</span><span class="n">dzt</span><span class="p">)</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="s1">&#39;depth&#39;</span><span class="p">)</span> <span class="o">/</span> <span class="n">ds_full</span><span class="o">.</span><span class="n">dzt</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="s1">&#39;depth&#39;</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="n">mean_temp</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">mean_temp_weighted</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
16.271481181388435
12.320585088179214
</pre></div></div>
</div>
</div>
</div>
<div class="section" id="Periodic-2D-example">
<h2>Periodic 2D example<a class="headerlink" href="#Periodic-2D-example" title="Permalink to this headline">¶</a></h2>
<p>Below we will show how to apply these methods similarly to a global surface wind field, which is periodic in the longitudinal (‘x’) direction. The dataset is stored in a <a class="reference external" href="https://zenodo.org/record/4421428#.X_XP7y1h3x9">zenodo archive</a>.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[8]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="c1"># download the data</span>
<span class="kn">import</span> <span class="nn">urllib.request</span>
<span class="kn">import</span> <span class="nn">shutil</span>

<span class="n">url</span> <span class="o">=</span> <span class="s1">&#39;https://zenodo.org/record/4421428/files/&#39;</span>
<span class="n">file_name</span> <span class="o">=</span> <span class="s1">&#39;uvwnd.10m.gauss.2018.nc&#39;</span>
<span class="k">with</span> <span class="n">urllib</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">urlopen</span><span class="p">(</span><span class="n">url</span> <span class="o">+</span> <span class="n">file_name</span><span class="p">)</span> <span class="k">as</span> <span class="n">response</span><span class="p">,</span> <span class="nb">open</span><span class="p">(</span><span class="n">file_name</span><span class="p">,</span> <span class="s1">&#39;wb&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">out_file</span><span class="p">:</span>
    <span class="n">shutil</span><span class="o">.</span><span class="n">copyfileobj</span><span class="p">(</span><span class="n">response</span><span class="p">,</span> <span class="n">out_file</span><span class="p">)</span>

<span class="c1"># open the data</span>
<span class="n">ds</span> <span class="o">=</span> <span class="n">xr</span><span class="o">.</span><span class="n">open_dataset</span><span class="p">(</span><span class="n">file_name</span><span class="p">)</span>
<span class="n">ds</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[8]:
</pre></div>
</div>
<div class="output_area rendered_html docutils container">
<div><svg style="position: absolute; width: 0; height: 0; overflow: hidden">
<defs>
<symbol id="icon-database" viewBox="0 0 32 32">
<path d="M16 0c-8.837 0-16 2.239-16 5v4c0 2.761 7.163 5 16 5s16-2.239 16-5v-4c0-2.761-7.163-5-16-5z"></path>
<path d="M16 17c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z"></path>
<path d="M16 26c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z"></path>
</symbol>
<symbol id="icon-file-text2" viewBox="0 0 32 32">
<path d="M28.681 7.159c-0.694-0.947-1.662-2.053-2.724-3.116s-2.169-2.030-3.116-2.724c-1.612-1.182-2.393-1.319-2.841-1.319h-15.5c-1.378 0-2.5 1.121-2.5 2.5v27c0 1.378 1.122 2.5 2.5 2.5h23c1.378 0 2.5-1.122 2.5-2.5v-19.5c0-0.448-0.137-1.23-1.319-2.841zM24.543 5.457c0.959 0.959 1.712 1.825 2.268 2.543h-4.811v-4.811c0.718 0.556 1.584 1.309 2.543 2.268zM28 29.5c0 0.271-0.229 0.5-0.5 0.5h-23c-0.271 0-0.5-0.229-0.5-0.5v-27c0-0.271 0.229-0.5 0.5-0.5 0 0 15.499-0 15.5 0v7c0 0.552 0.448 1 1 1h7v19.5z"></path>
<path d="M23 26h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
<path d="M23 22h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
<path d="M23 18h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
</symbol>
</defs>
</svg>
<style>/* CSS stylesheet for displaying xarray objects in jupyterlab.
 *
 */

:root {
  --xr-font-color0: var(--jp-content-font-color0, rgba(0, 0, 0, 1));
  --xr-font-color2: var(--jp-content-font-color2, rgba(0, 0, 0, 0.54));
  --xr-font-color3: var(--jp-content-font-color3, rgba(0, 0, 0, 0.38));
  --xr-border-color: var(--jp-border-color2, #e0e0e0);
  --xr-disabled-color: var(--jp-layout-color3, #bdbdbd);
  --xr-background-color: var(--jp-layout-color0, white);
  --xr-background-color-row-even: var(--jp-layout-color1, white);
  --xr-background-color-row-odd: var(--jp-layout-color2, #eeeeee);
}

html[theme=dark],
body.vscode-dark {
  --xr-font-color0: rgba(255, 255, 255, 1);
  --xr-font-color2: rgba(255, 255, 255, 0.54);
  --xr-font-color3: rgba(255, 255, 255, 0.38);
  --xr-border-color: #1F1F1F;
  --xr-disabled-color: #515151;
  --xr-background-color: #111111;
  --xr-background-color-row-even: #111111;
  --xr-background-color-row-odd: #313131;
}

.xr-wrap {
  display: block;
  min-width: 300px;
  max-width: 700px;
}

.xr-text-repr-fallback {
  /* fallback to plain text repr when CSS is not injected (untrusted notebook) */
  display: none;
}

.xr-header {
  padding-top: 6px;
  padding-bottom: 6px;
  margin-bottom: 4px;
  border-bottom: solid 1px var(--xr-border-color);
}

.xr-header > div,
.xr-header > ul {
  display: inline;
  margin-top: 0;
  margin-bottom: 0;
}

.xr-obj-type,
.xr-array-name {
  margin-left: 2px;
  margin-right: 10px;
}

.xr-obj-type {
  color: var(--xr-font-color2);
}

.xr-sections {
  padding-left: 0 !important;
  display: grid;
  grid-template-columns: 150px auto auto 1fr 20px 20px;
}

.xr-section-item {
  display: contents;
}

.xr-section-item input {
  display: none;
}

.xr-section-item input + label {
  color: var(--xr-disabled-color);
}

.xr-section-item input:enabled + label {
  cursor: pointer;
  color: var(--xr-font-color2);
}

.xr-section-item input:enabled + label:hover {
  color: var(--xr-font-color0);
}

.xr-section-summary {
  grid-column: 1;
  color: var(--xr-font-color2);
  font-weight: 500;
}

.xr-section-summary > span {
  display: inline-block;
  padding-left: 0.5em;
}

.xr-section-summary-in:disabled + label {
  color: var(--xr-font-color2);
}

.xr-section-summary-in + label:before {
  display: inline-block;
  content: '►';
  font-size: 11px;
  width: 15px;
  text-align: center;
}

.xr-section-summary-in:disabled + label:before {
  color: var(--xr-disabled-color);
}

.xr-section-summary-in:checked + label:before {
  content: '▼';
}

.xr-section-summary-in:checked + label > span {
  display: none;
}

.xr-section-summary,
.xr-section-inline-details {
  padding-top: 4px;
  padding-bottom: 4px;
}

.xr-section-inline-details {
  grid-column: 2 / -1;
}

.xr-section-details {
  display: none;
  grid-column: 1 / -1;
  margin-bottom: 5px;
}

.xr-section-summary-in:checked ~ .xr-section-details {
  display: contents;
}

.xr-array-wrap {
  grid-column: 1 / -1;
  display: grid;
  grid-template-columns: 20px auto;
}

.xr-array-wrap > label {
  grid-column: 1;
  vertical-align: top;
}

.xr-preview {
  color: var(--xr-font-color3);
}

.xr-array-preview,
.xr-array-data {
  padding: 0 5px !important;
  grid-column: 2;
}

.xr-array-data,
.xr-array-in:checked ~ .xr-array-preview {
  display: none;
}

.xr-array-in:checked ~ .xr-array-data,
.xr-array-preview {
  display: inline-block;
}

.xr-dim-list {
  display: inline-block !important;
  list-style: none;
  padding: 0 !important;
  margin: 0;
}

.xr-dim-list li {
  display: inline-block;
  padding: 0;
  margin: 0;
}

.xr-dim-list:before {
  content: '(';
}

.xr-dim-list:after {
  content: ')';
}

.xr-dim-list li:not(:last-child):after {
  content: ',';
  padding-right: 5px;
}

.xr-has-index {
  font-weight: bold;
}

.xr-var-list,
.xr-var-item {
  display: contents;
}

.xr-var-item > div,
.xr-var-item label,
.xr-var-item > .xr-var-name span {
  background-color: var(--xr-background-color-row-even);
  margin-bottom: 0;
}

.xr-var-item > .xr-var-name:hover span {
  padding-right: 5px;
}

.xr-var-list > li:nth-child(odd) > div,
.xr-var-list > li:nth-child(odd) > label,
.xr-var-list > li:nth-child(odd) > .xr-var-name span {
  background-color: var(--xr-background-color-row-odd);
}

.xr-var-name {
  grid-column: 1;
}

.xr-var-dims {
  grid-column: 2;
}

.xr-var-dtype {
  grid-column: 3;
  text-align: right;
  color: var(--xr-font-color2);
}

.xr-var-preview {
  grid-column: 4;
}

.xr-var-name,
.xr-var-dims,
.xr-var-dtype,
.xr-preview,
.xr-attrs dt {
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  padding-right: 10px;
}

.xr-var-name:hover,
.xr-var-dims:hover,
.xr-var-dtype:hover,
.xr-attrs dt:hover {
  overflow: visible;
  width: auto;
  z-index: 1;
}

.xr-var-attrs,
.xr-var-data {
  display: none;
  background-color: var(--xr-background-color) !important;
  padding-bottom: 5px !important;
}

.xr-var-attrs-in:checked ~ .xr-var-attrs,
.xr-var-data-in:checked ~ .xr-var-data {
  display: block;
}

.xr-var-data > table {
  float: right;
}

.xr-var-name span,
.xr-var-data,
.xr-attrs {
  padding-left: 25px !important;
}

.xr-attrs,
.xr-var-attrs,
.xr-var-data {
  grid-column: 1 / -1;
}

dl.xr-attrs {
  padding: 0;
  margin: 0;
  display: grid;
  grid-template-columns: 125px auto;
}

.xr-attrs dt, dd {
  padding: 0;
  margin: 0;
  float: left;
  padding-right: 10px;
  width: auto;
}

.xr-attrs dt {
  font-weight: normal;
  grid-column: 1;
}

.xr-attrs dt:hover span {
  display: inline-block;
  background: var(--xr-background-color);
  padding-right: 10px;
}

.xr-attrs dd {
  grid-column: 2;
  white-space: pre-wrap;
  word-break: break-all;
}

.xr-icon-database,
.xr-icon-file-text2 {
  display: inline-block;
  vertical-align: middle;
  width: 1em;
  height: 1.5em !important;
  stroke-width: 0;
  stroke: currentColor;
  fill: currentColor;
}
</style><pre class='xr-text-repr-fallback'>&lt;xarray.Dataset&gt;
Dimensions:    (lat: 94, lon: 192, nbnds: 2, time: 71)
Coordinates:
  * lat        (lat) float32 88.542 86.6531 84.7532 ... -86.6531 -88.542
  * lon        (lon) float32 0.0 1.875 3.75 5.625 ... 354.375 356.25 358.125
  * time       (time) datetime64[ns] 2018-01-01 2018-01-02 ... 2018-03-12
Dimensions without coordinates: nbnds
Data variables:
    uwnd       (time, lat, lon) float32 ...
    time_bnds  (time, nbnds) float64 1.911e+06 1.911e+06 ... 1.913e+06 1.913e+06
    vwnd       (time, lat, lon) float32 ...
Attributes:
    Conventions:    COARDS
    title:          mean daily NMC reanalysis (2014)
    history:        created 2017/12 by Hoop (netCDF2.3)
    description:    Data is from NMC initialized reanalysis\n(4x/day).  It co...
    platform:       Model
    References:     http://www.esrl.noaa.gov/psd/data/gridded/data.ncep.reana...
    dataset_title:  NCEP-NCAR Reanalysis 1</pre><div class='xr-wrap' hidden><div class='xr-header'><div class='xr-obj-type'>xarray.Dataset</div></div><ul class='xr-sections'><li class='xr-section-item'><input id='section-98412496-7c56-4384-a9c9-39534410fb49' class='xr-section-summary-in' type='checkbox' disabled ><label for='section-98412496-7c56-4384-a9c9-39534410fb49' class='xr-section-summary'  title='Expand/collapse section'>Dimensions:</label><div class='xr-section-inline-details'><ul class='xr-dim-list'><li><span class='xr-has-index'>lat</span>: 94</li><li><span class='xr-has-index'>lon</span>: 192</li><li><span>nbnds</span>: 2</li><li><span class='xr-has-index'>time</span>: 71</li></ul></div><div class='xr-section-details'></div></li><li class='xr-section-item'><input id='section-278ee708-8451-4904-8e47-8e412dcd2d81' class='xr-section-summary-in' type='checkbox'  checked><label for='section-278ee708-8451-4904-8e47-8e412dcd2d81' class='xr-section-summary' >Coordinates: <span>(3)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><ul class='xr-var-list'><li class='xr-var-item'><div class='xr-var-name'><span class='xr-has-index'>lat</span></div><div class='xr-var-dims'>(lat)</div><div class='xr-var-dtype'>float32</div><div class='xr-var-preview xr-preview'>88.542 86.6531 ... -86.6531 -88.542</div><input id='attrs-5ba903f5-6b1d-4224-a14d-bfb09c2941e3' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-5ba903f5-6b1d-4224-a14d-bfb09c2941e3' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-5da898b1-97ef-4d5f-93cf-0f0f2b377c90' class='xr-var-data-in' type='checkbox'><label for='data-5da898b1-97ef-4d5f-93cf-0f0f2b377c90' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>units :</span></dt><dd>degrees_north</dd><dt><span>actual_range :</span></dt><dd>[ 88.542 -88.542]</dd><dt><span>long_name :</span></dt><dd>Latitude</dd><dt><span>standard_name :</span></dt><dd>latitude</dd><dt><span>axis :</span></dt><dd>Y</dd></dl></div><div class='xr-var-data'><pre>array([ 88.542   ,  86.6531  ,  84.7532  ,  82.8508  ,  80.9473  ,  79.0435  ,
        77.1394  ,  75.2351  ,  73.3307  ,  71.4262  ,  69.5217  ,  67.6171  ,
        65.7125  ,  63.8079  ,  61.9033  ,  59.9986  ,  58.0939  ,  56.1893  ,
        54.2846  ,  52.3799  ,  50.4752  ,  48.5705  ,  46.6658  ,  44.7611  ,
        42.8564  ,  40.9517  ,  39.047   ,  37.1422  ,  35.2375  ,  33.3328  ,
        31.4281  ,  29.5234  ,  27.6186  ,  25.7139  ,  23.8092  ,  21.9044  ,
        19.9997  ,  18.095   ,  16.1902  ,  14.2855  ,  12.3808  ,  10.47604 ,
         8.57131 ,   6.66657 ,   4.76184 ,   2.8571  ,   0.952368,  -0.952368,
        -2.8571  ,  -4.76184 ,  -6.66657 ,  -8.57131 , -10.47604 , -12.3808  ,
       -14.2855  , -16.1902  , -18.095   , -19.9997  , -21.9044  , -23.8092  ,
       -25.7139  , -27.6186  , -29.5234  , -31.4281  , -33.3328  , -35.2375  ,
       -37.1422  , -39.047   , -40.9517  , -42.8564  , -44.7611  , -46.6658  ,
       -48.5705  , -50.4752  , -52.3799  , -54.2846  , -56.1893  , -58.0939  ,
       -59.9986  , -61.9033  , -63.8079  , -65.7125  , -67.6171  , -69.5217  ,
       -71.4262  , -73.3307  , -75.2351  , -77.1394  , -79.0435  , -80.9473  ,
       -82.8508  , -84.7532  , -86.6531  , -88.542   ], dtype=float32)</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span class='xr-has-index'>lon</span></div><div class='xr-var-dims'>(lon)</div><div class='xr-var-dtype'>float32</div><div class='xr-var-preview xr-preview'>0.0 1.875 3.75 ... 356.25 358.125</div><input id='attrs-8806f5bd-0e88-4a8e-b427-dc071034af7e' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-8806f5bd-0e88-4a8e-b427-dc071034af7e' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-aec44609-effd-4541-88c0-34722a9d9f76' class='xr-var-data-in' type='checkbox'><label for='data-aec44609-effd-4541-88c0-34722a9d9f76' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>units :</span></dt><dd>degrees_east</dd><dt><span>long_name :</span></dt><dd>Longitude</dd><dt><span>actual_range :</span></dt><dd>[  0.    358.125]</dd><dt><span>standard_name :</span></dt><dd>longitude</dd><dt><span>axis :</span></dt><dd>X</dd></dl></div><div class='xr-var-data'><pre>array([  0.   ,   1.875,   3.75 ,   5.625,   7.5  ,   9.375,  11.25 ,  13.125,
        15.   ,  16.875,  18.75 ,  20.625,  22.5  ,  24.375,  26.25 ,  28.125,
        30.   ,  31.875,  33.75 ,  35.625,  37.5  ,  39.375,  41.25 ,  43.125,
        45.   ,  46.875,  48.75 ,  50.625,  52.5  ,  54.375,  56.25 ,  58.125,
        60.   ,  61.875,  63.75 ,  65.625,  67.5  ,  69.375,  71.25 ,  73.125,
        75.   ,  76.875,  78.75 ,  80.625,  82.5  ,  84.375,  86.25 ,  88.125,
        90.   ,  91.875,  93.75 ,  95.625,  97.5  ,  99.375, 101.25 , 103.125,
       105.   , 106.875, 108.75 , 110.625, 112.5  , 114.375, 116.25 , 118.125,
       120.   , 121.875, 123.75 , 125.625, 127.5  , 129.375, 131.25 , 133.125,
       135.   , 136.875, 138.75 , 140.625, 142.5  , 144.375, 146.25 , 148.125,
       150.   , 151.875, 153.75 , 155.625, 157.5  , 159.375, 161.25 , 163.125,
       165.   , 166.875, 168.75 , 170.625, 172.5  , 174.375, 176.25 , 178.125,
       180.   , 181.875, 183.75 , 185.625, 187.5  , 189.375, 191.25 , 193.125,
       195.   , 196.875, 198.75 , 200.625, 202.5  , 204.375, 206.25 , 208.125,
       210.   , 211.875, 213.75 , 215.625, 217.5  , 219.375, 221.25 , 223.125,
       225.   , 226.875, 228.75 , 230.625, 232.5  , 234.375, 236.25 , 238.125,
       240.   , 241.875, 243.75 , 245.625, 247.5  , 249.375, 251.25 , 253.125,
       255.   , 256.875, 258.75 , 260.625, 262.5  , 264.375, 266.25 , 268.125,
       270.   , 271.875, 273.75 , 275.625, 277.5  , 279.375, 281.25 , 283.125,
       285.   , 286.875, 288.75 , 290.625, 292.5  , 294.375, 296.25 , 298.125,
       300.   , 301.875, 303.75 , 305.625, 307.5  , 309.375, 311.25 , 313.125,
       315.   , 316.875, 318.75 , 320.625, 322.5  , 324.375, 326.25 , 328.125,
       330.   , 331.875, 333.75 , 335.625, 337.5  , 339.375, 341.25 , 343.125,
       345.   , 346.875, 348.75 , 350.625, 352.5  , 354.375, 356.25 , 358.125],
      dtype=float32)</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span class='xr-has-index'>time</span></div><div class='xr-var-dims'>(time)</div><div class='xr-var-dtype'>datetime64[ns]</div><div class='xr-var-preview xr-preview'>2018-01-01 ... 2018-03-12</div><input id='attrs-e04d1a24-cdfb-4c59-b912-02fce5346c57' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-e04d1a24-cdfb-4c59-b912-02fce5346c57' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-13f9cf1f-8ec9-40c0-921d-656d34565128' class='xr-var-data-in' type='checkbox'><label for='data-13f9cf1f-8ec9-40c0-921d-656d34565128' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>Time</dd><dt><span>delta_t :</span></dt><dd>0000-00-01 00:00:00</dd><dt><span>standard_name :</span></dt><dd>time</dd><dt><span>axis :</span></dt><dd>T</dd><dt><span>avg_period :</span></dt><dd>0000-00-01 00:00:00</dd><dt><span>coordinate_defines :</span></dt><dd>start</dd><dt><span>actual_range :</span></dt><dd>[1910952. 1912632.]</dd></dl></div><div class='xr-var-data'><pre>array([&#x27;2018-01-01T00:00:00.000000000&#x27;, &#x27;2018-01-02T00:00:00.000000000&#x27;,
       &#x27;2018-01-03T00:00:00.000000000&#x27;, &#x27;2018-01-04T00:00:00.000000000&#x27;,
       &#x27;2018-01-05T00:00:00.000000000&#x27;, &#x27;2018-01-06T00:00:00.000000000&#x27;,
       &#x27;2018-01-07T00:00:00.000000000&#x27;, &#x27;2018-01-08T00:00:00.000000000&#x27;,
       &#x27;2018-01-09T00:00:00.000000000&#x27;, &#x27;2018-01-10T00:00:00.000000000&#x27;,
       &#x27;2018-01-11T00:00:00.000000000&#x27;, &#x27;2018-01-12T00:00:00.000000000&#x27;,
       &#x27;2018-01-13T00:00:00.000000000&#x27;, &#x27;2018-01-14T00:00:00.000000000&#x27;,
       &#x27;2018-01-15T00:00:00.000000000&#x27;, &#x27;2018-01-16T00:00:00.000000000&#x27;,
       &#x27;2018-01-17T00:00:00.000000000&#x27;, &#x27;2018-01-18T00:00:00.000000000&#x27;,
       &#x27;2018-01-19T00:00:00.000000000&#x27;, &#x27;2018-01-20T00:00:00.000000000&#x27;,
       &#x27;2018-01-21T00:00:00.000000000&#x27;, &#x27;2018-01-22T00:00:00.000000000&#x27;,
       &#x27;2018-01-23T00:00:00.000000000&#x27;, &#x27;2018-01-24T00:00:00.000000000&#x27;,
       &#x27;2018-01-25T00:00:00.000000000&#x27;, &#x27;2018-01-26T00:00:00.000000000&#x27;,
       &#x27;2018-01-27T00:00:00.000000000&#x27;, &#x27;2018-01-28T00:00:00.000000000&#x27;,
       &#x27;2018-01-29T00:00:00.000000000&#x27;, &#x27;2018-01-30T00:00:00.000000000&#x27;,
       &#x27;2018-01-31T00:00:00.000000000&#x27;, &#x27;2018-02-01T00:00:00.000000000&#x27;,
       &#x27;2018-02-02T00:00:00.000000000&#x27;, &#x27;2018-02-03T00:00:00.000000000&#x27;,
       &#x27;2018-02-04T00:00:00.000000000&#x27;, &#x27;2018-02-05T00:00:00.000000000&#x27;,
       &#x27;2018-02-06T00:00:00.000000000&#x27;, &#x27;2018-02-07T00:00:00.000000000&#x27;,
       &#x27;2018-02-08T00:00:00.000000000&#x27;, &#x27;2018-02-09T00:00:00.000000000&#x27;,
       &#x27;2018-02-10T00:00:00.000000000&#x27;, &#x27;2018-02-11T00:00:00.000000000&#x27;,
       &#x27;2018-02-12T00:00:00.000000000&#x27;, &#x27;2018-02-13T00:00:00.000000000&#x27;,
       &#x27;2018-02-14T00:00:00.000000000&#x27;, &#x27;2018-02-15T00:00:00.000000000&#x27;,
       &#x27;2018-02-16T00:00:00.000000000&#x27;, &#x27;2018-02-17T00:00:00.000000000&#x27;,
       &#x27;2018-02-18T00:00:00.000000000&#x27;, &#x27;2018-02-19T00:00:00.000000000&#x27;,
       &#x27;2018-02-20T00:00:00.000000000&#x27;, &#x27;2018-02-21T00:00:00.000000000&#x27;,
       &#x27;2018-02-22T00:00:00.000000000&#x27;, &#x27;2018-02-23T00:00:00.000000000&#x27;,
       &#x27;2018-02-24T00:00:00.000000000&#x27;, &#x27;2018-02-25T00:00:00.000000000&#x27;,
       &#x27;2018-02-26T00:00:00.000000000&#x27;, &#x27;2018-02-27T00:00:00.000000000&#x27;,
       &#x27;2018-02-28T00:00:00.000000000&#x27;, &#x27;2018-03-01T00:00:00.000000000&#x27;,
       &#x27;2018-03-02T00:00:00.000000000&#x27;, &#x27;2018-03-03T00:00:00.000000000&#x27;,
       &#x27;2018-03-04T00:00:00.000000000&#x27;, &#x27;2018-03-05T00:00:00.000000000&#x27;,
       &#x27;2018-03-06T00:00:00.000000000&#x27;, &#x27;2018-03-07T00:00:00.000000000&#x27;,
       &#x27;2018-03-08T00:00:00.000000000&#x27;, &#x27;2018-03-09T00:00:00.000000000&#x27;,
       &#x27;2018-03-10T00:00:00.000000000&#x27;, &#x27;2018-03-11T00:00:00.000000000&#x27;,
       &#x27;2018-03-12T00:00:00.000000000&#x27;], dtype=&#x27;datetime64[ns]&#x27;)</pre></div></li></ul></div></li><li class='xr-section-item'><input id='section-bf763c0f-c577-4a24-b31e-3d70d14b299d' class='xr-section-summary-in' type='checkbox'  checked><label for='section-bf763c0f-c577-4a24-b31e-3d70d14b299d' class='xr-section-summary' >Data variables: <span>(3)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><ul class='xr-var-list'><li class='xr-var-item'><div class='xr-var-name'><span>uwnd</span></div><div class='xr-var-dims'>(time, lat, lon)</div><div class='xr-var-dtype'>float32</div><div class='xr-var-preview xr-preview'>...</div><input id='attrs-da11f57c-281e-4a8b-878b-3d19a930267c' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-da11f57c-281e-4a8b-878b-3d19a930267c' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-3dd63182-3b25-4130-8081-00c67d0265e6' class='xr-var-data-in' type='checkbox'><label for='data-3dd63182-3b25-4130-8081-00c67d0265e6' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>mean Daily u-wind at 10 m</dd><dt><span>units :</span></dt><dd>m/s</dd><dt><span>precision :</span></dt><dd>2</dd><dt><span>GRIB_id :</span></dt><dd>33</dd><dt><span>GRIB_name :</span></dt><dd>U GRD</dd><dt><span>var_desc :</span></dt><dd>u-wind</dd><dt><span>dataset :</span></dt><dd>NCEP Reanalysis Daily Averages</dd><dt><span>level_desc :</span></dt><dd>10 m</dd><dt><span>statistic :</span></dt><dd>Mean</dd><dt><span>parent_stat :</span></dt><dd>Individual Obs</dd><dt><span>valid_range :</span></dt><dd>[-102.2  102.2]</dd><dt><span>actual_range :</span></dt><dd>[-21.   25.8]</dd></dl></div><div class='xr-var-data'><pre>[1281408 values with dtype=float32]</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>time_bnds</span></div><div class='xr-var-dims'>(time, nbnds)</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>...</div><input id='attrs-6ba11ee8-0643-448c-b17e-3e65b2acfeab' class='xr-var-attrs-in' type='checkbox' disabled><label for='attrs-6ba11ee8-0643-448c-b17e-3e65b2acfeab' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-890bc1b2-9849-47ae-8e40-79be8422d4fd' class='xr-var-data-in' type='checkbox'><label for='data-890bc1b2-9849-47ae-8e40-79be8422d4fd' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'></dl></div><div class='xr-var-data'><pre>array([[1910952., 1910976.],
       [1910976., 1911000.],
       [1911000., 1911024.],
       [1911024., 1911048.],
       [1911048., 1911072.],
       [1911072., 1911096.],
       [1911096., 1911120.],
       [1911120., 1911144.],
       [1911144., 1911168.],
       [1911168., 1911192.],
       [1911192., 1911216.],
       [1911216., 1911240.],
       [1911240., 1911264.],
       [1911264., 1911288.],
       [1911288., 1911312.],
       [1911312., 1911336.],
       [1911336., 1911360.],
       [1911360., 1911384.],
       [1911384., 1911408.],
       [1911408., 1911432.],
       [1911432., 1911456.],
       [1911456., 1911480.],
       [1911480., 1911504.],
       [1911504., 1911528.],
       [1911528., 1911552.],
       [1911552., 1911576.],
       [1911576., 1911600.],
       [1911600., 1911624.],
       [1911624., 1911648.],
       [1911648., 1911672.],
       [1911672., 1911696.],
       [1911696., 1911720.],
       [1911720., 1911744.],
       [1911744., 1911768.],
       [1911768., 1911792.],
       [1911792., 1911816.],
       [1911816., 1911840.],
       [1911840., 1911864.],
       [1911864., 1911888.],
       [1911888., 1911912.],
       [1911912., 1911936.],
       [1911936., 1911960.],
       [1911960., 1911984.],
       [1911984., 1912008.],
       [1912008., 1912032.],
       [1912032., 1912056.],
       [1912056., 1912080.],
       [1912080., 1912104.],
       [1912104., 1912128.],
       [1912128., 1912152.],
       [1912152., 1912176.],
       [1912176., 1912200.],
       [1912200., 1912224.],
       [1912224., 1912248.],
       [1912248., 1912272.],
       [1912272., 1912296.],
       [1912296., 1912320.],
       [1912320., 1912344.],
       [1912344., 1912368.],
       [1912368., 1912392.],
       [1912392., 1912416.],
       [1912416., 1912440.],
       [1912440., 1912464.],
       [1912464., 1912488.],
       [1912488., 1912512.],
       [1912512., 1912536.],
       [1912536., 1912560.],
       [1912560., 1912584.],
       [1912584., 1912608.],
       [1912608., 1912632.],
       [1912632., 1912656.]])</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>vwnd</span></div><div class='xr-var-dims'>(time, lat, lon)</div><div class='xr-var-dtype'>float32</div><div class='xr-var-preview xr-preview'>...</div><input id='attrs-35426050-2444-43cb-b92c-5d7766880082' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-35426050-2444-43cb-b92c-5d7766880082' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-4ed4bc09-dd2f-4925-8904-9abf52281f9b' class='xr-var-data-in' type='checkbox'><label for='data-4ed4bc09-dd2f-4925-8904-9abf52281f9b' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>mean Daily v-wind at 10 m</dd><dt><span>units :</span></dt><dd>m/s</dd><dt><span>precision :</span></dt><dd>2</dd><dt><span>GRIB_id :</span></dt><dd>34</dd><dt><span>GRIB_name :</span></dt><dd>V GRD</dd><dt><span>var_desc :</span></dt><dd>v-wind</dd><dt><span>dataset :</span></dt><dd>NCEP Reanalysis Daily Averages</dd><dt><span>level_desc :</span></dt><dd>10 m</dd><dt><span>statistic :</span></dt><dd>Mean</dd><dt><span>parent_stat :</span></dt><dd>Individual Obs</dd><dt><span>valid_range :</span></dt><dd>[-102.2  102.2]</dd><dt><span>actual_range :</span></dt><dd>[-24.2    24.075]</dd></dl></div><div class='xr-var-data'><pre>[1281408 values with dtype=float32]</pre></div></li></ul></div></li><li class='xr-section-item'><input id='section-b6897467-4015-49f9-a168-4537a56729a5' class='xr-section-summary-in' type='checkbox'  checked><label for='section-b6897467-4015-49f9-a168-4537a56729a5' class='xr-section-summary' >Attributes: <span>(7)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><dl class='xr-attrs'><dt><span>Conventions :</span></dt><dd>COARDS</dd><dt><span>title :</span></dt><dd>mean daily NMC reanalysis (2014)</dd><dt><span>history :</span></dt><dd>created 2017/12 by Hoop (netCDF2.3)</dd><dt><span>description :</span></dt><dd>Data is from NMC initialized reanalysis
(4x/day).  It consists of T62 variables interpolated to
pressure surfaces from model (sigma) surfaces.</dd><dt><span>platform :</span></dt><dd>Model</dd><dt><span>References :</span></dt><dd>http://www.esrl.noaa.gov/psd/data/gridded/data.ncep.reanalysis.html</dd><dt><span>dataset_title :</span></dt><dd>NCEP-NCAR Reanalysis 1</dd></dl></div></li></ul></div></div></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[9]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">ds_full</span> <span class="o">=</span> <span class="n">generate_grid_ds</span><span class="p">(</span><span class="n">ds</span><span class="p">,</span> <span class="p">{</span><span class="s1">&#39;X&#39;</span><span class="p">:</span><span class="s1">&#39;lon&#39;</span><span class="p">,</span> <span class="s1">&#39;Y&#39;</span><span class="p">:</span><span class="s1">&#39;lat&#39;</span><span class="p">})</span>
<span class="n">ds_full</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[9]:
</pre></div>
</div>
<div class="output_area rendered_html docutils container">
<div><svg style="position: absolute; width: 0; height: 0; overflow: hidden">
<defs>
<symbol id="icon-database" viewBox="0 0 32 32">
<path d="M16 0c-8.837 0-16 2.239-16 5v4c0 2.761 7.163 5 16 5s16-2.239 16-5v-4c0-2.761-7.163-5-16-5z"></path>
<path d="M16 17c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z"></path>
<path d="M16 26c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z"></path>
</symbol>
<symbol id="icon-file-text2" viewBox="0 0 32 32">
<path d="M28.681 7.159c-0.694-0.947-1.662-2.053-2.724-3.116s-2.169-2.030-3.116-2.724c-1.612-1.182-2.393-1.319-2.841-1.319h-15.5c-1.378 0-2.5 1.121-2.5 2.5v27c0 1.378 1.122 2.5 2.5 2.5h23c1.378 0 2.5-1.122 2.5-2.5v-19.5c0-0.448-0.137-1.23-1.319-2.841zM24.543 5.457c0.959 0.959 1.712 1.825 2.268 2.543h-4.811v-4.811c0.718 0.556 1.584 1.309 2.543 2.268zM28 29.5c0 0.271-0.229 0.5-0.5 0.5h-23c-0.271 0-0.5-0.229-0.5-0.5v-27c0-0.271 0.229-0.5 0.5-0.5 0 0 15.499-0 15.5 0v7c0 0.552 0.448 1 1 1h7v19.5z"></path>
<path d="M23 26h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
<path d="M23 22h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
<path d="M23 18h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
</symbol>
</defs>
</svg>
<style>/* CSS stylesheet for displaying xarray objects in jupyterlab.
 *
 */

:root {
  --xr-font-color0: var(--jp-content-font-color0, rgba(0, 0, 0, 1));
  --xr-font-color2: var(--jp-content-font-color2, rgba(0, 0, 0, 0.54));
  --xr-font-color3: var(--jp-content-font-color3, rgba(0, 0, 0, 0.38));
  --xr-border-color: var(--jp-border-color2, #e0e0e0);
  --xr-disabled-color: var(--jp-layout-color3, #bdbdbd);
  --xr-background-color: var(--jp-layout-color0, white);
  --xr-background-color-row-even: var(--jp-layout-color1, white);
  --xr-background-color-row-odd: var(--jp-layout-color2, #eeeeee);
}

html[theme=dark],
body.vscode-dark {
  --xr-font-color0: rgba(255, 255, 255, 1);
  --xr-font-color2: rgba(255, 255, 255, 0.54);
  --xr-font-color3: rgba(255, 255, 255, 0.38);
  --xr-border-color: #1F1F1F;
  --xr-disabled-color: #515151;
  --xr-background-color: #111111;
  --xr-background-color-row-even: #111111;
  --xr-background-color-row-odd: #313131;
}

.xr-wrap {
  display: block;
  min-width: 300px;
  max-width: 700px;
}

.xr-text-repr-fallback {
  /* fallback to plain text repr when CSS is not injected (untrusted notebook) */
  display: none;
}

.xr-header {
  padding-top: 6px;
  padding-bottom: 6px;
  margin-bottom: 4px;
  border-bottom: solid 1px var(--xr-border-color);
}

.xr-header > div,
.xr-header > ul {
  display: inline;
  margin-top: 0;
  margin-bottom: 0;
}

.xr-obj-type,
.xr-array-name {
  margin-left: 2px;
  margin-right: 10px;
}

.xr-obj-type {
  color: var(--xr-font-color2);
}

.xr-sections {
  padding-left: 0 !important;
  display: grid;
  grid-template-columns: 150px auto auto 1fr 20px 20px;
}

.xr-section-item {
  display: contents;
}

.xr-section-item input {
  display: none;
}

.xr-section-item input + label {
  color: var(--xr-disabled-color);
}

.xr-section-item input:enabled + label {
  cursor: pointer;
  color: var(--xr-font-color2);
}

.xr-section-item input:enabled + label:hover {
  color: var(--xr-font-color0);
}

.xr-section-summary {
  grid-column: 1;
  color: var(--xr-font-color2);
  font-weight: 500;
}

.xr-section-summary > span {
  display: inline-block;
  padding-left: 0.5em;
}

.xr-section-summary-in:disabled + label {
  color: var(--xr-font-color2);
}

.xr-section-summary-in + label:before {
  display: inline-block;
  content: '►';
  font-size: 11px;
  width: 15px;
  text-align: center;
}

.xr-section-summary-in:disabled + label:before {
  color: var(--xr-disabled-color);
}

.xr-section-summary-in:checked + label:before {
  content: '▼';
}

.xr-section-summary-in:checked + label > span {
  display: none;
}

.xr-section-summary,
.xr-section-inline-details {
  padding-top: 4px;
  padding-bottom: 4px;
}

.xr-section-inline-details {
  grid-column: 2 / -1;
}

.xr-section-details {
  display: none;
  grid-column: 1 / -1;
  margin-bottom: 5px;
}

.xr-section-summary-in:checked ~ .xr-section-details {
  display: contents;
}

.xr-array-wrap {
  grid-column: 1 / -1;
  display: grid;
  grid-template-columns: 20px auto;
}

.xr-array-wrap > label {
  grid-column: 1;
  vertical-align: top;
}

.xr-preview {
  color: var(--xr-font-color3);
}

.xr-array-preview,
.xr-array-data {
  padding: 0 5px !important;
  grid-column: 2;
}

.xr-array-data,
.xr-array-in:checked ~ .xr-array-preview {
  display: none;
}

.xr-array-in:checked ~ .xr-array-data,
.xr-array-preview {
  display: inline-block;
}

.xr-dim-list {
  display: inline-block !important;
  list-style: none;
  padding: 0 !important;
  margin: 0;
}

.xr-dim-list li {
  display: inline-block;
  padding: 0;
  margin: 0;
}

.xr-dim-list:before {
  content: '(';
}

.xr-dim-list:after {
  content: ')';
}

.xr-dim-list li:not(:last-child):after {
  content: ',';
  padding-right: 5px;
}

.xr-has-index {
  font-weight: bold;
}

.xr-var-list,
.xr-var-item {
  display: contents;
}

.xr-var-item > div,
.xr-var-item label,
.xr-var-item > .xr-var-name span {
  background-color: var(--xr-background-color-row-even);
  margin-bottom: 0;
}

.xr-var-item > .xr-var-name:hover span {
  padding-right: 5px;
}

.xr-var-list > li:nth-child(odd) > div,
.xr-var-list > li:nth-child(odd) > label,
.xr-var-list > li:nth-child(odd) > .xr-var-name span {
  background-color: var(--xr-background-color-row-odd);
}

.xr-var-name {
  grid-column: 1;
}

.xr-var-dims {
  grid-column: 2;
}

.xr-var-dtype {
  grid-column: 3;
  text-align: right;
  color: var(--xr-font-color2);
}

.xr-var-preview {
  grid-column: 4;
}

.xr-var-name,
.xr-var-dims,
.xr-var-dtype,
.xr-preview,
.xr-attrs dt {
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  padding-right: 10px;
}

.xr-var-name:hover,
.xr-var-dims:hover,
.xr-var-dtype:hover,
.xr-attrs dt:hover {
  overflow: visible;
  width: auto;
  z-index: 1;
}

.xr-var-attrs,
.xr-var-data {
  display: none;
  background-color: var(--xr-background-color) !important;
  padding-bottom: 5px !important;
}

.xr-var-attrs-in:checked ~ .xr-var-attrs,
.xr-var-data-in:checked ~ .xr-var-data {
  display: block;
}

.xr-var-data > table {
  float: right;
}

.xr-var-name span,
.xr-var-data,
.xr-attrs {
  padding-left: 25px !important;
}

.xr-attrs,
.xr-var-attrs,
.xr-var-data {
  grid-column: 1 / -1;
}

dl.xr-attrs {
  padding: 0;
  margin: 0;
  display: grid;
  grid-template-columns: 125px auto;
}

.xr-attrs dt, dd {
  padding: 0;
  margin: 0;
  float: left;
  padding-right: 10px;
  width: auto;
}

.xr-attrs dt {
  font-weight: normal;
  grid-column: 1;
}

.xr-attrs dt:hover span {
  display: inline-block;
  background: var(--xr-background-color);
  padding-right: 10px;
}

.xr-attrs dd {
  grid-column: 2;
  white-space: pre-wrap;
  word-break: break-all;
}

.xr-icon-database,
.xr-icon-file-text2 {
  display: inline-block;
  vertical-align: middle;
  width: 1em;
  height: 1.5em !important;
  stroke-width: 0;
  stroke: currentColor;
  fill: currentColor;
}
</style><pre class='xr-text-repr-fallback'>&lt;xarray.Dataset&gt;
Dimensions:    (lat: 94, lat_left: 94, lon: 192, lon_left: 192, nbnds: 2, time: 71)
Coordinates:
  * lat        (lat) float32 88.542 86.6531 84.7532 ... -86.6531 -88.542
  * lon        (lon) float32 0.0 1.875 3.75 5.625 ... 354.375 356.25 358.125
  * time       (time) datetime64[ns] 2018-01-01 2018-01-02 ... 2018-03-12
  * lon_left   (lon_left) float32 -0.9375 0.9375 2.8125 ... 355.3125 357.1875
  * lat_left   (lat_left) float32 89.48645 87.59755 ... -85.70315 -87.59755
Dimensions without coordinates: nbnds
Data variables:
    uwnd       (time, lat, lon) float32 ...
    time_bnds  (time, nbnds) float64 1.911e+06 1.911e+06 ... 1.913e+06 1.913e+06
    vwnd       (time, lat, lon) float32 ...
Attributes:
    Conventions:    COARDS
    title:          mean daily NMC reanalysis (2014)
    history:        created 2017/12 by Hoop (netCDF2.3)
    description:    Data is from NMC initialized reanalysis\n(4x/day).  It co...
    platform:       Model
    References:     http://www.esrl.noaa.gov/psd/data/gridded/data.ncep.reana...
    dataset_title:  NCEP-NCAR Reanalysis 1</pre><div class='xr-wrap' hidden><div class='xr-header'><div class='xr-obj-type'>xarray.Dataset</div></div><ul class='xr-sections'><li class='xr-section-item'><input id='section-c082f271-76ee-4329-ac52-8e515177a8c8' class='xr-section-summary-in' type='checkbox' disabled ><label for='section-c082f271-76ee-4329-ac52-8e515177a8c8' class='xr-section-summary'  title='Expand/collapse section'>Dimensions:</label><div class='xr-section-inline-details'><ul class='xr-dim-list'><li><span class='xr-has-index'>lat</span>: 94</li><li><span class='xr-has-index'>lat_left</span>: 94</li><li><span class='xr-has-index'>lon</span>: 192</li><li><span class='xr-has-index'>lon_left</span>: 192</li><li><span>nbnds</span>: 2</li><li><span class='xr-has-index'>time</span>: 71</li></ul></div><div class='xr-section-details'></div></li><li class='xr-section-item'><input id='section-8dc55cc9-5a10-4a53-b555-128b85e61f8d' class='xr-section-summary-in' type='checkbox'  checked><label for='section-8dc55cc9-5a10-4a53-b555-128b85e61f8d' class='xr-section-summary' >Coordinates: <span>(5)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><ul class='xr-var-list'><li class='xr-var-item'><div class='xr-var-name'><span class='xr-has-index'>lat</span></div><div class='xr-var-dims'>(lat)</div><div class='xr-var-dtype'>float32</div><div class='xr-var-preview xr-preview'>88.542 86.6531 ... -86.6531 -88.542</div><input id='attrs-039b0620-ecc5-4fbf-b05c-30f51637bd41' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-039b0620-ecc5-4fbf-b05c-30f51637bd41' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-92be684d-82fe-4ec3-a2b9-9ac31704a560' class='xr-var-data-in' type='checkbox'><label for='data-92be684d-82fe-4ec3-a2b9-9ac31704a560' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>units :</span></dt><dd>degrees_north</dd><dt><span>actual_range :</span></dt><dd>[ 88.542 -88.542]</dd><dt><span>long_name :</span></dt><dd>Latitude</dd><dt><span>standard_name :</span></dt><dd>latitude</dd><dt><span>axis :</span></dt><dd>Y</dd></dl></div><div class='xr-var-data'><pre>array([ 88.542   ,  86.6531  ,  84.7532  ,  82.8508  ,  80.9473  ,  79.0435  ,
        77.1394  ,  75.2351  ,  73.3307  ,  71.4262  ,  69.5217  ,  67.6171  ,
        65.7125  ,  63.8079  ,  61.9033  ,  59.9986  ,  58.0939  ,  56.1893  ,
        54.2846  ,  52.3799  ,  50.4752  ,  48.5705  ,  46.6658  ,  44.7611  ,
        42.8564  ,  40.9517  ,  39.047   ,  37.1422  ,  35.2375  ,  33.3328  ,
        31.4281  ,  29.5234  ,  27.6186  ,  25.7139  ,  23.8092  ,  21.9044  ,
        19.9997  ,  18.095   ,  16.1902  ,  14.2855  ,  12.3808  ,  10.47604 ,
         8.57131 ,   6.66657 ,   4.76184 ,   2.8571  ,   0.952368,  -0.952368,
        -2.8571  ,  -4.76184 ,  -6.66657 ,  -8.57131 , -10.47604 , -12.3808  ,
       -14.2855  , -16.1902  , -18.095   , -19.9997  , -21.9044  , -23.8092  ,
       -25.7139  , -27.6186  , -29.5234  , -31.4281  , -33.3328  , -35.2375  ,
       -37.1422  , -39.047   , -40.9517  , -42.8564  , -44.7611  , -46.6658  ,
       -48.5705  , -50.4752  , -52.3799  , -54.2846  , -56.1893  , -58.0939  ,
       -59.9986  , -61.9033  , -63.8079  , -65.7125  , -67.6171  , -69.5217  ,
       -71.4262  , -73.3307  , -75.2351  , -77.1394  , -79.0435  , -80.9473  ,
       -82.8508  , -84.7532  , -86.6531  , -88.542   ], dtype=float32)</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span class='xr-has-index'>lon</span></div><div class='xr-var-dims'>(lon)</div><div class='xr-var-dtype'>float32</div><div class='xr-var-preview xr-preview'>0.0 1.875 3.75 ... 356.25 358.125</div><input id='attrs-20cf8887-2df4-4a71-acde-6ee3f30ab43a' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-20cf8887-2df4-4a71-acde-6ee3f30ab43a' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-2a3dc94f-55b9-4d5c-9d15-c57c49409da6' class='xr-var-data-in' type='checkbox'><label for='data-2a3dc94f-55b9-4d5c-9d15-c57c49409da6' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>units :</span></dt><dd>degrees_east</dd><dt><span>long_name :</span></dt><dd>Longitude</dd><dt><span>actual_range :</span></dt><dd>[  0.    358.125]</dd><dt><span>standard_name :</span></dt><dd>longitude</dd><dt><span>axis :</span></dt><dd>X</dd></dl></div><div class='xr-var-data'><pre>array([  0.   ,   1.875,   3.75 ,   5.625,   7.5  ,   9.375,  11.25 ,  13.125,
        15.   ,  16.875,  18.75 ,  20.625,  22.5  ,  24.375,  26.25 ,  28.125,
        30.   ,  31.875,  33.75 ,  35.625,  37.5  ,  39.375,  41.25 ,  43.125,
        45.   ,  46.875,  48.75 ,  50.625,  52.5  ,  54.375,  56.25 ,  58.125,
        60.   ,  61.875,  63.75 ,  65.625,  67.5  ,  69.375,  71.25 ,  73.125,
        75.   ,  76.875,  78.75 ,  80.625,  82.5  ,  84.375,  86.25 ,  88.125,
        90.   ,  91.875,  93.75 ,  95.625,  97.5  ,  99.375, 101.25 , 103.125,
       105.   , 106.875, 108.75 , 110.625, 112.5  , 114.375, 116.25 , 118.125,
       120.   , 121.875, 123.75 , 125.625, 127.5  , 129.375, 131.25 , 133.125,
       135.   , 136.875, 138.75 , 140.625, 142.5  , 144.375, 146.25 , 148.125,
       150.   , 151.875, 153.75 , 155.625, 157.5  , 159.375, 161.25 , 163.125,
       165.   , 166.875, 168.75 , 170.625, 172.5  , 174.375, 176.25 , 178.125,
       180.   , 181.875, 183.75 , 185.625, 187.5  , 189.375, 191.25 , 193.125,
       195.   , 196.875, 198.75 , 200.625, 202.5  , 204.375, 206.25 , 208.125,
       210.   , 211.875, 213.75 , 215.625, 217.5  , 219.375, 221.25 , 223.125,
       225.   , 226.875, 228.75 , 230.625, 232.5  , 234.375, 236.25 , 238.125,
       240.   , 241.875, 243.75 , 245.625, 247.5  , 249.375, 251.25 , 253.125,
       255.   , 256.875, 258.75 , 260.625, 262.5  , 264.375, 266.25 , 268.125,
       270.   , 271.875, 273.75 , 275.625, 277.5  , 279.375, 281.25 , 283.125,
       285.   , 286.875, 288.75 , 290.625, 292.5  , 294.375, 296.25 , 298.125,
       300.   , 301.875, 303.75 , 305.625, 307.5  , 309.375, 311.25 , 313.125,
       315.   , 316.875, 318.75 , 320.625, 322.5  , 324.375, 326.25 , 328.125,
       330.   , 331.875, 333.75 , 335.625, 337.5  , 339.375, 341.25 , 343.125,
       345.   , 346.875, 348.75 , 350.625, 352.5  , 354.375, 356.25 , 358.125],
      dtype=float32)</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span class='xr-has-index'>time</span></div><div class='xr-var-dims'>(time)</div><div class='xr-var-dtype'>datetime64[ns]</div><div class='xr-var-preview xr-preview'>2018-01-01 ... 2018-03-12</div><input id='attrs-32d4fe1c-2768-443a-ad7c-1fb683ebd557' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-32d4fe1c-2768-443a-ad7c-1fb683ebd557' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-513ed513-65cc-491c-8126-38affc280b67' class='xr-var-data-in' type='checkbox'><label for='data-513ed513-65cc-491c-8126-38affc280b67' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>Time</dd><dt><span>delta_t :</span></dt><dd>0000-00-01 00:00:00</dd><dt><span>standard_name :</span></dt><dd>time</dd><dt><span>axis :</span></dt><dd>T</dd><dt><span>avg_period :</span></dt><dd>0000-00-01 00:00:00</dd><dt><span>coordinate_defines :</span></dt><dd>start</dd><dt><span>actual_range :</span></dt><dd>[1910952. 1912632.]</dd></dl></div><div class='xr-var-data'><pre>array([&#x27;2018-01-01T00:00:00.000000000&#x27;, &#x27;2018-01-02T00:00:00.000000000&#x27;,
       &#x27;2018-01-03T00:00:00.000000000&#x27;, &#x27;2018-01-04T00:00:00.000000000&#x27;,
       &#x27;2018-01-05T00:00:00.000000000&#x27;, &#x27;2018-01-06T00:00:00.000000000&#x27;,
       &#x27;2018-01-07T00:00:00.000000000&#x27;, &#x27;2018-01-08T00:00:00.000000000&#x27;,
       &#x27;2018-01-09T00:00:00.000000000&#x27;, &#x27;2018-01-10T00:00:00.000000000&#x27;,
       &#x27;2018-01-11T00:00:00.000000000&#x27;, &#x27;2018-01-12T00:00:00.000000000&#x27;,
       &#x27;2018-01-13T00:00:00.000000000&#x27;, &#x27;2018-01-14T00:00:00.000000000&#x27;,
       &#x27;2018-01-15T00:00:00.000000000&#x27;, &#x27;2018-01-16T00:00:00.000000000&#x27;,
       &#x27;2018-01-17T00:00:00.000000000&#x27;, &#x27;2018-01-18T00:00:00.000000000&#x27;,
       &#x27;2018-01-19T00:00:00.000000000&#x27;, &#x27;2018-01-20T00:00:00.000000000&#x27;,
       &#x27;2018-01-21T00:00:00.000000000&#x27;, &#x27;2018-01-22T00:00:00.000000000&#x27;,
       &#x27;2018-01-23T00:00:00.000000000&#x27;, &#x27;2018-01-24T00:00:00.000000000&#x27;,
       &#x27;2018-01-25T00:00:00.000000000&#x27;, &#x27;2018-01-26T00:00:00.000000000&#x27;,
       &#x27;2018-01-27T00:00:00.000000000&#x27;, &#x27;2018-01-28T00:00:00.000000000&#x27;,
       &#x27;2018-01-29T00:00:00.000000000&#x27;, &#x27;2018-01-30T00:00:00.000000000&#x27;,
       &#x27;2018-01-31T00:00:00.000000000&#x27;, &#x27;2018-02-01T00:00:00.000000000&#x27;,
       &#x27;2018-02-02T00:00:00.000000000&#x27;, &#x27;2018-02-03T00:00:00.000000000&#x27;,
       &#x27;2018-02-04T00:00:00.000000000&#x27;, &#x27;2018-02-05T00:00:00.000000000&#x27;,
       &#x27;2018-02-06T00:00:00.000000000&#x27;, &#x27;2018-02-07T00:00:00.000000000&#x27;,
       &#x27;2018-02-08T00:00:00.000000000&#x27;, &#x27;2018-02-09T00:00:00.000000000&#x27;,
       &#x27;2018-02-10T00:00:00.000000000&#x27;, &#x27;2018-02-11T00:00:00.000000000&#x27;,
       &#x27;2018-02-12T00:00:00.000000000&#x27;, &#x27;2018-02-13T00:00:00.000000000&#x27;,
       &#x27;2018-02-14T00:00:00.000000000&#x27;, &#x27;2018-02-15T00:00:00.000000000&#x27;,
       &#x27;2018-02-16T00:00:00.000000000&#x27;, &#x27;2018-02-17T00:00:00.000000000&#x27;,
       &#x27;2018-02-18T00:00:00.000000000&#x27;, &#x27;2018-02-19T00:00:00.000000000&#x27;,
       &#x27;2018-02-20T00:00:00.000000000&#x27;, &#x27;2018-02-21T00:00:00.000000000&#x27;,
       &#x27;2018-02-22T00:00:00.000000000&#x27;, &#x27;2018-02-23T00:00:00.000000000&#x27;,
       &#x27;2018-02-24T00:00:00.000000000&#x27;, &#x27;2018-02-25T00:00:00.000000000&#x27;,
       &#x27;2018-02-26T00:00:00.000000000&#x27;, &#x27;2018-02-27T00:00:00.000000000&#x27;,
       &#x27;2018-02-28T00:00:00.000000000&#x27;, &#x27;2018-03-01T00:00:00.000000000&#x27;,
       &#x27;2018-03-02T00:00:00.000000000&#x27;, &#x27;2018-03-03T00:00:00.000000000&#x27;,
       &#x27;2018-03-04T00:00:00.000000000&#x27;, &#x27;2018-03-05T00:00:00.000000000&#x27;,
       &#x27;2018-03-06T00:00:00.000000000&#x27;, &#x27;2018-03-07T00:00:00.000000000&#x27;,
       &#x27;2018-03-08T00:00:00.000000000&#x27;, &#x27;2018-03-09T00:00:00.000000000&#x27;,
       &#x27;2018-03-10T00:00:00.000000000&#x27;, &#x27;2018-03-11T00:00:00.000000000&#x27;,
       &#x27;2018-03-12T00:00:00.000000000&#x27;], dtype=&#x27;datetime64[ns]&#x27;)</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span class='xr-has-index'>lon_left</span></div><div class='xr-var-dims'>(lon_left)</div><div class='xr-var-dtype'>float32</div><div class='xr-var-preview xr-preview'>-0.9375 0.9375 ... 357.1875</div><input id='attrs-d7d58e62-1dc5-43d8-a256-fc92656efe59' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-d7d58e62-1dc5-43d8-a256-fc92656efe59' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-75de84a8-b020-41dd-934b-de9677cb1ffc' class='xr-var-data-in' type='checkbox'><label for='data-75de84a8-b020-41dd-934b-de9677cb1ffc' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>axis :</span></dt><dd>X</dd><dt><span>c_grid_axis_shift :</span></dt><dd>-0.5</dd></dl></div><div class='xr-var-data'><pre>array([ -0.9375,   0.9375,   2.8125,   4.6875,   6.5625,   8.4375,  10.3125,
        12.1875,  14.0625,  15.9375,  17.8125,  19.6875,  21.5625,  23.4375,
        25.3125,  27.1875,  29.0625,  30.9375,  32.8125,  34.6875,  36.5625,
        38.4375,  40.3125,  42.1875,  44.0625,  45.9375,  47.8125,  49.6875,
        51.5625,  53.4375,  55.3125,  57.1875,  59.0625,  60.9375,  62.8125,
        64.6875,  66.5625,  68.4375,  70.3125,  72.1875,  74.0625,  75.9375,
        77.8125,  79.6875,  81.5625,  83.4375,  85.3125,  87.1875,  89.0625,
        90.9375,  92.8125,  94.6875,  96.5625,  98.4375, 100.3125, 102.1875,
       104.0625, 105.9375, 107.8125, 109.6875, 111.5625, 113.4375, 115.3125,
       117.1875, 119.0625, 120.9375, 122.8125, 124.6875, 126.5625, 128.4375,
       130.3125, 132.1875, 134.0625, 135.9375, 137.8125, 139.6875, 141.5625,
       143.4375, 145.3125, 147.1875, 149.0625, 150.9375, 152.8125, 154.6875,
       156.5625, 158.4375, 160.3125, 162.1875, 164.0625, 165.9375, 167.8125,
       169.6875, 171.5625, 173.4375, 175.3125, 177.1875, 179.0625, 180.9375,
       182.8125, 184.6875, 186.5625, 188.4375, 190.3125, 192.1875, 194.0625,
       195.9375, 197.8125, 199.6875, 201.5625, 203.4375, 205.3125, 207.1875,
       209.0625, 210.9375, 212.8125, 214.6875, 216.5625, 218.4375, 220.3125,
       222.1875, 224.0625, 225.9375, 227.8125, 229.6875, 231.5625, 233.4375,
       235.3125, 237.1875, 239.0625, 240.9375, 242.8125, 244.6875, 246.5625,
       248.4375, 250.3125, 252.1875, 254.0625, 255.9375, 257.8125, 259.6875,
       261.5625, 263.4375, 265.3125, 267.1875, 269.0625, 270.9375, 272.8125,
       274.6875, 276.5625, 278.4375, 280.3125, 282.1875, 284.0625, 285.9375,
       287.8125, 289.6875, 291.5625, 293.4375, 295.3125, 297.1875, 299.0625,
       300.9375, 302.8125, 304.6875, 306.5625, 308.4375, 310.3125, 312.1875,
       314.0625, 315.9375, 317.8125, 319.6875, 321.5625, 323.4375, 325.3125,
       327.1875, 329.0625, 330.9375, 332.8125, 334.6875, 336.5625, 338.4375,
       340.3125, 342.1875, 344.0625, 345.9375, 347.8125, 349.6875, 351.5625,
       353.4375, 355.3125, 357.1875], dtype=float32)</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span class='xr-has-index'>lat_left</span></div><div class='xr-var-dims'>(lat_left)</div><div class='xr-var-dtype'>float32</div><div class='xr-var-preview xr-preview'>89.48645 87.59755 ... -87.59755</div><input id='attrs-55667dbc-3833-4c7b-b48e-2480ef733f8c' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-55667dbc-3833-4c7b-b48e-2480ef733f8c' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-5b29e19f-2426-4a0a-a9f6-f2855960a787' class='xr-var-data-in' type='checkbox'><label for='data-5b29e19f-2426-4a0a-a9f6-f2855960a787' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>axis :</span></dt><dd>Y</dd><dt><span>c_grid_axis_shift :</span></dt><dd>-0.5</dd></dl></div><div class='xr-var-data'><pre>array([ 89.48645 ,  87.59755 ,  85.70315 ,  83.802   ,  81.89905 ,  79.99541 ,
        78.091446,  76.18725 ,  74.2829  ,  72.37845 ,  70.47395 ,  68.5694  ,
        66.6648  ,  64.7602  ,  62.8556  ,  60.95095 ,  59.04625 ,  57.1416  ,
        55.23695 ,  53.332253,  51.42755 ,  49.52285 ,  47.61815 ,  45.713448,
        43.80875 ,  41.90405 ,  39.99935 ,  38.0946  ,  36.18985 ,  34.28515 ,
        32.38045 ,  30.47575 ,  28.571   ,  26.66625 ,  24.76155 ,  22.8568  ,
        20.95205 ,  19.04735 ,  17.142601,  15.23785 ,  13.33315 ,  11.42842 ,
         9.523675,   7.61894 ,   5.714205,   3.80947 ,   1.904734,   0.      ,
        -1.904734,  -3.80947 ,  -5.714205,  -7.61894 ,  -9.523675, -11.42842 ,
       -13.33315 , -15.23785 , -17.142601, -19.04735 , -20.95205 , -22.8568  ,
       -24.76155 , -26.66625 , -28.571   , -30.47575 , -32.38045 , -34.28515 ,
       -36.18985 , -38.0946  , -39.99935 , -41.90405 , -43.80875 , -45.713448,
       -47.61815 , -49.52285 , -51.42755 , -53.332253, -55.23695 , -57.1416  ,
       -59.04625 , -60.95095 , -62.8556  , -64.7602  , -66.6648  , -68.5694  ,
       -70.47395 , -72.37845 , -74.2829  , -76.18725 , -78.091446, -79.99541 ,
       -81.89905 , -83.802   , -85.70315 , -87.59755 ], dtype=float32)</pre></div></li></ul></div></li><li class='xr-section-item'><input id='section-4a798ccc-1141-4c45-8819-cdc4e43a820c' class='xr-section-summary-in' type='checkbox'  checked><label for='section-4a798ccc-1141-4c45-8819-cdc4e43a820c' class='xr-section-summary' >Data variables: <span>(3)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><ul class='xr-var-list'><li class='xr-var-item'><div class='xr-var-name'><span>uwnd</span></div><div class='xr-var-dims'>(time, lat, lon)</div><div class='xr-var-dtype'>float32</div><div class='xr-var-preview xr-preview'>...</div><input id='attrs-bbf04621-0efb-4180-8a65-af68aff654e8' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-bbf04621-0efb-4180-8a65-af68aff654e8' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-a0c3854c-2356-4f3e-99a6-da587822b4cf' class='xr-var-data-in' type='checkbox'><label for='data-a0c3854c-2356-4f3e-99a6-da587822b4cf' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>mean Daily u-wind at 10 m</dd><dt><span>units :</span></dt><dd>m/s</dd><dt><span>precision :</span></dt><dd>2</dd><dt><span>GRIB_id :</span></dt><dd>33</dd><dt><span>GRIB_name :</span></dt><dd>U GRD</dd><dt><span>var_desc :</span></dt><dd>u-wind</dd><dt><span>dataset :</span></dt><dd>NCEP Reanalysis Daily Averages</dd><dt><span>level_desc :</span></dt><dd>10 m</dd><dt><span>statistic :</span></dt><dd>Mean</dd><dt><span>parent_stat :</span></dt><dd>Individual Obs</dd><dt><span>valid_range :</span></dt><dd>[-102.2  102.2]</dd><dt><span>actual_range :</span></dt><dd>[-21.   25.8]</dd></dl></div><div class='xr-var-data'><pre>[1281408 values with dtype=float32]</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>time_bnds</span></div><div class='xr-var-dims'>(time, nbnds)</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>1.911e+06 1.911e+06 ... 1.913e+06</div><input id='attrs-7426cdb1-2dd2-4e53-8000-b3562dea89f5' class='xr-var-attrs-in' type='checkbox' disabled><label for='attrs-7426cdb1-2dd2-4e53-8000-b3562dea89f5' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-078414b3-b710-46c9-a203-5f6e0170ec05' class='xr-var-data-in' type='checkbox'><label for='data-078414b3-b710-46c9-a203-5f6e0170ec05' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'></dl></div><div class='xr-var-data'><pre>array([[1910952., 1910976.],
       [1910976., 1911000.],
       [1911000., 1911024.],
       [1911024., 1911048.],
       [1911048., 1911072.],
       [1911072., 1911096.],
       [1911096., 1911120.],
       [1911120., 1911144.],
       [1911144., 1911168.],
       [1911168., 1911192.],
       [1911192., 1911216.],
       [1911216., 1911240.],
       [1911240., 1911264.],
       [1911264., 1911288.],
       [1911288., 1911312.],
       [1911312., 1911336.],
       [1911336., 1911360.],
       [1911360., 1911384.],
       [1911384., 1911408.],
       [1911408., 1911432.],
       [1911432., 1911456.],
       [1911456., 1911480.],
       [1911480., 1911504.],
       [1911504., 1911528.],
       [1911528., 1911552.],
       [1911552., 1911576.],
       [1911576., 1911600.],
       [1911600., 1911624.],
       [1911624., 1911648.],
       [1911648., 1911672.],
       [1911672., 1911696.],
       [1911696., 1911720.],
       [1911720., 1911744.],
       [1911744., 1911768.],
       [1911768., 1911792.],
       [1911792., 1911816.],
       [1911816., 1911840.],
       [1911840., 1911864.],
       [1911864., 1911888.],
       [1911888., 1911912.],
       [1911912., 1911936.],
       [1911936., 1911960.],
       [1911960., 1911984.],
       [1911984., 1912008.],
       [1912008., 1912032.],
       [1912032., 1912056.],
       [1912056., 1912080.],
       [1912080., 1912104.],
       [1912104., 1912128.],
       [1912128., 1912152.],
       [1912152., 1912176.],
       [1912176., 1912200.],
       [1912200., 1912224.],
       [1912224., 1912248.],
       [1912248., 1912272.],
       [1912272., 1912296.],
       [1912296., 1912320.],
       [1912320., 1912344.],
       [1912344., 1912368.],
       [1912368., 1912392.],
       [1912392., 1912416.],
       [1912416., 1912440.],
       [1912440., 1912464.],
       [1912464., 1912488.],
       [1912488., 1912512.],
       [1912512., 1912536.],
       [1912536., 1912560.],
       [1912560., 1912584.],
       [1912584., 1912608.],
       [1912608., 1912632.],
       [1912632., 1912656.]])</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>vwnd</span></div><div class='xr-var-dims'>(time, lat, lon)</div><div class='xr-var-dtype'>float32</div><div class='xr-var-preview xr-preview'>...</div><input id='attrs-40ab7188-8961-4249-a5df-03593c6d5456' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-40ab7188-8961-4249-a5df-03593c6d5456' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-c8c58e81-2122-4b4c-8a27-310925fd05ca' class='xr-var-data-in' type='checkbox'><label for='data-c8c58e81-2122-4b4c-8a27-310925fd05ca' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>mean Daily v-wind at 10 m</dd><dt><span>units :</span></dt><dd>m/s</dd><dt><span>precision :</span></dt><dd>2</dd><dt><span>GRIB_id :</span></dt><dd>34</dd><dt><span>GRIB_name :</span></dt><dd>V GRD</dd><dt><span>var_desc :</span></dt><dd>v-wind</dd><dt><span>dataset :</span></dt><dd>NCEP Reanalysis Daily Averages</dd><dt><span>level_desc :</span></dt><dd>10 m</dd><dt><span>statistic :</span></dt><dd>Mean</dd><dt><span>parent_stat :</span></dt><dd>Individual Obs</dd><dt><span>valid_range :</span></dt><dd>[-102.2  102.2]</dd><dt><span>actual_range :</span></dt><dd>[-24.2    24.075]</dd></dl></div><div class='xr-var-data'><pre>[1281408 values with dtype=float32]</pre></div></li></ul></div></li><li class='xr-section-item'><input id='section-7feea394-8bc4-4b45-8b16-43836601de07' class='xr-section-summary-in' type='checkbox'  checked><label for='section-7feea394-8bc4-4b45-8b16-43836601de07' class='xr-section-summary' >Attributes: <span>(7)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><dl class='xr-attrs'><dt><span>Conventions :</span></dt><dd>COARDS</dd><dt><span>title :</span></dt><dd>mean daily NMC reanalysis (2014)</dd><dt><span>history :</span></dt><dd>created 2017/12 by Hoop (netCDF2.3)</dd><dt><span>description :</span></dt><dd>Data is from NMC initialized reanalysis
(4x/day).  It consists of T62 variables interpolated to
pressure surfaces from model (sigma) surfaces.</dd><dt><span>platform :</span></dt><dd>Model</dd><dt><span>References :</span></dt><dd>http://www.esrl.noaa.gov/psd/data/gridded/data.ncep.reanalysis.html</dd><dt><span>dataset_title :</span></dt><dd>NCEP-NCAR Reanalysis 1</dd></dl></div></li></ul></div></div></div>
</div>
<p>As in the depth profile the longitude and latitude values are extended to the <code class="docutils literal notranslate"><span class="pre">left</span></code> when the defaults are used. However, since the latitude is not periodic we can specify the position to extend to as <code class="docutils literal notranslate"><span class="pre">outer</span></code> (more details <a class="reference external" href="grids.rst#axes-and-positions">here</a>). This will extend the latitudinal positions both to the left and right, avoiding missing values later on.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[10]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">grid</span> <span class="o">=</span> <span class="n">Grid</span><span class="p">(</span><span class="n">ds_full</span><span class="p">,</span> <span class="n">periodic</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;X&#39;</span><span class="p">])</span>
<span class="n">grid</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[10]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
&lt;xgcm.Grid&gt;
Y Axis (not periodic, boundary=None):
  * center   lat --&gt; left
  * left     lat_left --&gt; center
X Axis (periodic, boundary=None):
  * center   lon --&gt; left
  * left     lon_left --&gt; center
T Axis (not periodic, boundary=None):
  * center   time
</pre></div></div>
</div>
<p>Now we compute the difference (in degrees) along the longitude and latitude for both the cell center and the cell face. Since we are not taking the difference of a data variable across the periodic boundary, we need to specify the <code class="docutils literal notranslate"><span class="pre">boundary_discontinutity</span></code> in order to avoid the introduction of artefacts at the boundary.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[11]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">dlong</span> <span class="o">=</span> <span class="n">grid</span><span class="o">.</span><span class="n">diff</span><span class="p">(</span><span class="n">ds_full</span><span class="o">.</span><span class="n">lon</span><span class="p">,</span> <span class="s1">&#39;X&#39;</span><span class="p">,</span> <span class="n">boundary_discontinuity</span><span class="o">=</span><span class="mi">360</span><span class="p">)</span>
<span class="n">dlonc</span> <span class="o">=</span> <span class="n">grid</span><span class="o">.</span><span class="n">diff</span><span class="p">(</span><span class="n">ds_full</span><span class="o">.</span><span class="n">lon_left</span><span class="p">,</span> <span class="s1">&#39;X&#39;</span><span class="p">,</span> <span class="n">boundary_discontinuity</span><span class="o">=</span><span class="mi">360</span><span class="p">)</span>
<span class="n">dlonc_wo_discontinuity</span> <span class="o">=</span> <span class="n">grid</span><span class="o">.</span><span class="n">diff</span><span class="p">(</span><span class="n">ds_full</span><span class="o">.</span><span class="n">lon_left</span><span class="p">,</span> <span class="s1">&#39;X&#39;</span><span class="p">)</span>

<span class="n">dlatg</span> <span class="o">=</span> <span class="n">grid</span><span class="o">.</span><span class="n">diff</span><span class="p">(</span><span class="n">ds_full</span><span class="o">.</span><span class="n">lat</span><span class="p">,</span> <span class="s1">&#39;Y&#39;</span><span class="p">,</span> <span class="n">boundary</span><span class="o">=</span><span class="s1">&#39;fill&#39;</span><span class="p">,</span> <span class="n">fill_value</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">)</span>
<span class="n">dlatc</span> <span class="o">=</span> <span class="n">grid</span><span class="o">.</span><span class="n">diff</span><span class="p">(</span><span class="n">ds_full</span><span class="o">.</span><span class="n">lat_left</span><span class="p">,</span> <span class="s1">&#39;Y&#39;</span><span class="p">,</span> <span class="n">boundary</span><span class="o">=</span><span class="s1">&#39;fill&#39;</span><span class="p">,</span> <span class="n">fill_value</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">)</span>

<span class="n">dlonc</span><span class="o">.</span><span class="n">plot</span><span class="p">()</span>
<span class="n">dlonc_wo_discontinuity</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">linestyle</span><span class="o">=</span><span class="s1">&#39;--&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[11]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
[&lt;matplotlib.lines.Line2D at 0x7fa80c8fb550&gt;]
</pre></div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../../../_images/repos_xgcm_xgcm-examples_05_autogenerate_24_1.png" src="../../../_images/repos_xgcm_xgcm-examples_05_autogenerate_24_1.png" />
</div>
</div>
<p>Without adding the <code class="docutils literal notranslate"><span class="pre">boundary_discontinuity</span></code> input, the last cell distance is calculated incorectly.</p>
<p>The values we just calculated are actually not cell distances, but instead differences in longitude and latitude (in degrees). In order to calculate operators like the gradient <code class="docutils literal notranslate"><span class="pre">dlon</span></code> and <code class="docutils literal notranslate"><span class="pre">dlat</span></code> have to be converted into approximate cartesian distances on a globe.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[12]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="k">def</span> <span class="nf">dll_dist</span><span class="p">(</span><span class="n">dlon</span><span class="p">,</span> <span class="n">dlat</span><span class="p">,</span> <span class="n">lon</span><span class="p">,</span> <span class="n">lat</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Converts lat/lon differentials into distances in meters</span>

<span class="sd">        PARAMETERS</span>
<span class="sd">        ----------</span>
<span class="sd">        dlon : xarray.DataArray longitude differentials</span>
<span class="sd">        dlat : xarray.DataArray latitude differentials</span>
<span class="sd">        lon  : xarray.DataArray longitude values</span>
<span class="sd">        lat  : xarray.DataArray latitude values</span>

<span class="sd">        RETURNS</span>
<span class="sd">        -------</span>
<span class="sd">        dx  : xarray.DataArray distance inferred from dlon</span>
<span class="sd">        dy  : xarray.DataArray distance inferred from dlat</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">distance_1deg_equator</span> <span class="o">=</span> <span class="mf">111000.0</span>
        <span class="n">dx</span> <span class="o">=</span> <span class="n">dlon</span> <span class="o">*</span> <span class="n">xr</span><span class="o">.</span><span class="n">ufuncs</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">xr</span><span class="o">.</span><span class="n">ufuncs</span><span class="o">.</span><span class="n">deg2rad</span><span class="p">(</span><span class="n">lat</span><span class="p">))</span> <span class="o">*</span> <span class="n">distance_1deg_equator</span>
        <span class="n">dy</span> <span class="o">=</span> <span class="p">((</span><span class="n">lon</span> <span class="o">*</span> <span class="mi">0</span><span class="p">)</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span> <span class="o">*</span> <span class="n">dlat</span> <span class="o">*</span> <span class="n">distance_1deg_equator</span>
        <span class="k">return</span> <span class="n">dx</span><span class="p">,</span> <span class="n">dy</span>

<span class="n">ds_full</span><span class="o">.</span><span class="n">coords</span><span class="p">[</span><span class="s1">&#39;dxg&#39;</span><span class="p">],</span> <span class="n">ds_full</span><span class="o">.</span><span class="n">coords</span><span class="p">[</span><span class="s1">&#39;dyg&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">dll_dist</span><span class="p">(</span><span class="n">dlong</span><span class="p">,</span> <span class="n">dlatg</span><span class="p">,</span> <span class="n">ds_full</span><span class="o">.</span><span class="n">lon</span><span class="p">,</span> <span class="n">ds_full</span><span class="o">.</span><span class="n">lat</span><span class="p">)</span>
<span class="n">ds_full</span><span class="o">.</span><span class="n">coords</span><span class="p">[</span><span class="s1">&#39;dxc&#39;</span><span class="p">],</span> <span class="n">ds_full</span><span class="o">.</span><span class="n">coords</span><span class="p">[</span><span class="s1">&#39;dyc&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">dll_dist</span><span class="p">(</span><span class="n">dlonc</span><span class="p">,</span> <span class="n">dlatc</span><span class="p">,</span> <span class="n">ds_full</span><span class="o">.</span><span class="n">lon</span><span class="p">,</span> <span class="n">ds_full</span><span class="o">.</span><span class="n">lat</span><span class="p">)</span>
</pre></div>
</div>
</div>
<p>Based on the distances we can estimate the area of each grid cell and compute the area-weighted meridional average temperature</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[13]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">ds_full</span><span class="o">.</span><span class="n">coords</span><span class="p">[</span><span class="s1">&#39;area_c&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">ds_full</span><span class="o">.</span><span class="n">dxc</span> <span class="o">*</span> <span class="n">ds_full</span><span class="o">.</span><span class="n">dyc</span>
</pre></div>
</div>
</div>
<div class="section" id="Compute-zonal-gradient-of-the-surface-wind-field">
<h3>Compute zonal gradient of the surface wind field<a class="headerlink" href="#Compute-zonal-gradient-of-the-surface-wind-field" title="Permalink to this headline">¶</a></h3>
<p>Now that all needed grid metrics are available, we can compute the zonal temperature gradient similar as above.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[14]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">du_dx</span> <span class="o">=</span> <span class="n">grid</span><span class="o">.</span><span class="n">diff</span><span class="p">(</span><span class="n">ds_full</span><span class="o">.</span><span class="n">uwnd</span><span class="p">,</span> <span class="s1">&#39;X&#39;</span><span class="p">)</span> <span class="o">/</span> <span class="n">ds_full</span><span class="o">.</span><span class="n">dxg</span>
<span class="n">du_dx</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[14]:
</pre></div>
</div>
<div class="output_area rendered_html docutils container">
<div><svg style="position: absolute; width: 0; height: 0; overflow: hidden">
<defs>
<symbol id="icon-database" viewBox="0 0 32 32">
<path d="M16 0c-8.837 0-16 2.239-16 5v4c0 2.761 7.163 5 16 5s16-2.239 16-5v-4c0-2.761-7.163-5-16-5z"></path>
<path d="M16 17c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z"></path>
<path d="M16 26c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z"></path>
</symbol>
<symbol id="icon-file-text2" viewBox="0 0 32 32">
<path d="M28.681 7.159c-0.694-0.947-1.662-2.053-2.724-3.116s-2.169-2.030-3.116-2.724c-1.612-1.182-2.393-1.319-2.841-1.319h-15.5c-1.378 0-2.5 1.121-2.5 2.5v27c0 1.378 1.122 2.5 2.5 2.5h23c1.378 0 2.5-1.122 2.5-2.5v-19.5c0-0.448-0.137-1.23-1.319-2.841zM24.543 5.457c0.959 0.959 1.712 1.825 2.268 2.543h-4.811v-4.811c0.718 0.556 1.584 1.309 2.543 2.268zM28 29.5c0 0.271-0.229 0.5-0.5 0.5h-23c-0.271 0-0.5-0.229-0.5-0.5v-27c0-0.271 0.229-0.5 0.5-0.5 0 0 15.499-0 15.5 0v7c0 0.552 0.448 1 1 1h7v19.5z"></path>
<path d="M23 26h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
<path d="M23 22h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
<path d="M23 18h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
</symbol>
</defs>
</svg>
<style>/* CSS stylesheet for displaying xarray objects in jupyterlab.
 *
 */

:root {
  --xr-font-color0: var(--jp-content-font-color0, rgba(0, 0, 0, 1));
  --xr-font-color2: var(--jp-content-font-color2, rgba(0, 0, 0, 0.54));
  --xr-font-color3: var(--jp-content-font-color3, rgba(0, 0, 0, 0.38));
  --xr-border-color: var(--jp-border-color2, #e0e0e0);
  --xr-disabled-color: var(--jp-layout-color3, #bdbdbd);
  --xr-background-color: var(--jp-layout-color0, white);
  --xr-background-color-row-even: var(--jp-layout-color1, white);
  --xr-background-color-row-odd: var(--jp-layout-color2, #eeeeee);
}

html[theme=dark],
body.vscode-dark {
  --xr-font-color0: rgba(255, 255, 255, 1);
  --xr-font-color2: rgba(255, 255, 255, 0.54);
  --xr-font-color3: rgba(255, 255, 255, 0.38);
  --xr-border-color: #1F1F1F;
  --xr-disabled-color: #515151;
  --xr-background-color: #111111;
  --xr-background-color-row-even: #111111;
  --xr-background-color-row-odd: #313131;
}

.xr-wrap {
  display: block;
  min-width: 300px;
  max-width: 700px;
}

.xr-text-repr-fallback {
  /* fallback to plain text repr when CSS is not injected (untrusted notebook) */
  display: none;
}

.xr-header {
  padding-top: 6px;
  padding-bottom: 6px;
  margin-bottom: 4px;
  border-bottom: solid 1px var(--xr-border-color);
}

.xr-header > div,
.xr-header > ul {
  display: inline;
  margin-top: 0;
  margin-bottom: 0;
}

.xr-obj-type,
.xr-array-name {
  margin-left: 2px;
  margin-right: 10px;
}

.xr-obj-type {
  color: var(--xr-font-color2);
}

.xr-sections {
  padding-left: 0 !important;
  display: grid;
  grid-template-columns: 150px auto auto 1fr 20px 20px;
}

.xr-section-item {
  display: contents;
}

.xr-section-item input {
  display: none;
}

.xr-section-item input + label {
  color: var(--xr-disabled-color);
}

.xr-section-item input:enabled + label {
  cursor: pointer;
  color: var(--xr-font-color2);
}

.xr-section-item input:enabled + label:hover {
  color: var(--xr-font-color0);
}

.xr-section-summary {
  grid-column: 1;
  color: var(--xr-font-color2);
  font-weight: 500;
}

.xr-section-summary > span {
  display: inline-block;
  padding-left: 0.5em;
}

.xr-section-summary-in:disabled + label {
  color: var(--xr-font-color2);
}

.xr-section-summary-in + label:before {
  display: inline-block;
  content: '►';
  font-size: 11px;
  width: 15px;
  text-align: center;
}

.xr-section-summary-in:disabled + label:before {
  color: var(--xr-disabled-color);
}

.xr-section-summary-in:checked + label:before {
  content: '▼';
}

.xr-section-summary-in:checked + label > span {
  display: none;
}

.xr-section-summary,
.xr-section-inline-details {
  padding-top: 4px;
  padding-bottom: 4px;
}

.xr-section-inline-details {
  grid-column: 2 / -1;
}

.xr-section-details {
  display: none;
  grid-column: 1 / -1;
  margin-bottom: 5px;
}

.xr-section-summary-in:checked ~ .xr-section-details {
  display: contents;
}

.xr-array-wrap {
  grid-column: 1 / -1;
  display: grid;
  grid-template-columns: 20px auto;
}

.xr-array-wrap > label {
  grid-column: 1;
  vertical-align: top;
}

.xr-preview {
  color: var(--xr-font-color3);
}

.xr-array-preview,
.xr-array-data {
  padding: 0 5px !important;
  grid-column: 2;
}

.xr-array-data,
.xr-array-in:checked ~ .xr-array-preview {
  display: none;
}

.xr-array-in:checked ~ .xr-array-data,
.xr-array-preview {
  display: inline-block;
}

.xr-dim-list {
  display: inline-block !important;
  list-style: none;
  padding: 0 !important;
  margin: 0;
}

.xr-dim-list li {
  display: inline-block;
  padding: 0;
  margin: 0;
}

.xr-dim-list:before {
  content: '(';
}

.xr-dim-list:after {
  content: ')';
}

.xr-dim-list li:not(:last-child):after {
  content: ',';
  padding-right: 5px;
}

.xr-has-index {
  font-weight: bold;
}

.xr-var-list,
.xr-var-item {
  display: contents;
}

.xr-var-item > div,
.xr-var-item label,
.xr-var-item > .xr-var-name span {
  background-color: var(--xr-background-color-row-even);
  margin-bottom: 0;
}

.xr-var-item > .xr-var-name:hover span {
  padding-right: 5px;
}

.xr-var-list > li:nth-child(odd) > div,
.xr-var-list > li:nth-child(odd) > label,
.xr-var-list > li:nth-child(odd) > .xr-var-name span {
  background-color: var(--xr-background-color-row-odd);
}

.xr-var-name {
  grid-column: 1;
}

.xr-var-dims {
  grid-column: 2;
}

.xr-var-dtype {
  grid-column: 3;
  text-align: right;
  color: var(--xr-font-color2);
}

.xr-var-preview {
  grid-column: 4;
}

.xr-var-name,
.xr-var-dims,
.xr-var-dtype,
.xr-preview,
.xr-attrs dt {
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  padding-right: 10px;
}

.xr-var-name:hover,
.xr-var-dims:hover,
.xr-var-dtype:hover,
.xr-attrs dt:hover {
  overflow: visible;
  width: auto;
  z-index: 1;
}

.xr-var-attrs,
.xr-var-data {
  display: none;
  background-color: var(--xr-background-color) !important;
  padding-bottom: 5px !important;
}

.xr-var-attrs-in:checked ~ .xr-var-attrs,
.xr-var-data-in:checked ~ .xr-var-data {
  display: block;
}

.xr-var-data > table {
  float: right;
}

.xr-var-name span,
.xr-var-data,
.xr-attrs {
  padding-left: 25px !important;
}

.xr-attrs,
.xr-var-attrs,
.xr-var-data {
  grid-column: 1 / -1;
}

dl.xr-attrs {
  padding: 0;
  margin: 0;
  display: grid;
  grid-template-columns: 125px auto;
}

.xr-attrs dt, dd {
  padding: 0;
  margin: 0;
  float: left;
  padding-right: 10px;
  width: auto;
}

.xr-attrs dt {
  font-weight: normal;
  grid-column: 1;
}

.xr-attrs dt:hover span {
  display: inline-block;
  background: var(--xr-background-color);
  padding-right: 10px;
}

.xr-attrs dd {
  grid-column: 2;
  white-space: pre-wrap;
  word-break: break-all;
}

.xr-icon-database,
.xr-icon-file-text2 {
  display: inline-block;
  vertical-align: middle;
  width: 1em;
  height: 1.5em !important;
  stroke-width: 0;
  stroke: currentColor;
  fill: currentColor;
}
</style><pre class='xr-text-repr-fallback'>&lt;xarray.DataArray (time: 71, lat: 94, lon_left: 192)&gt;
array([[[ 0.0000000e+00,  0.0000000e+00,  0.0000000e+00, ...,
          0.0000000e+00, -1.1802297e-05,  0.0000000e+00],
        [ 0.0000000e+00,  5.1437846e-06,  0.0000000e+00, ...,
          0.0000000e+00,  5.1437846e-06,  0.0000000e+00],
        [-9.8517148e-06, -1.3135620e-05, -9.8517148e-06, ...,
         -6.5678100e-06, -6.5678100e-06, -9.8517148e-06],
        ...,
        [ 6.5678100e-06,  6.5678100e-06,  6.5678100e-06, ...,
          0.0000000e+00,  3.2839050e-06,  6.5678100e-06],
        [ 1.5431353e-05,  2.0575138e-05,  1.5431353e-05, ...,
          1.5431353e-05,  1.5431353e-05,  1.5431353e-05],
        [ 4.7209189e-05,  3.5406894e-05,  4.7209189e-05, ...,
          4.7209189e-05,  3.5406894e-05,  4.7209189e-05]],

       [[ 0.0000000e+00, -1.1802297e-05,  0.0000000e+00, ...,
          0.0000000e+00, -2.3604594e-05,  0.0000000e+00],
        [-5.1437846e-06, -5.1437846e-06, -5.1437846e-06, ...,
         -5.1437846e-06, -5.1437846e-06,  0.0000000e+00],
        [-6.5678100e-06, -9.8517148e-06, -1.3135620e-05, ...,
         -6.5678100e-06, -6.5678100e-06, -1.3135620e-05],
...
        [ 1.3135620e-05,  1.6419526e-05,  9.8517148e-06, ...,
          2.2987335e-05,  1.6419526e-05,  1.9703430e-05],
        [ 2.5718922e-05,  2.0575138e-05,  1.5431353e-05, ...,
          2.5718922e-05,  2.0575138e-05,  2.0575138e-05],
        [ 3.5406894e-05,  3.5406894e-05,  3.5406894e-05, ...,
          4.7209189e-05,  4.7209189e-05,  3.5406894e-05]],

       [[ 0.0000000e+00,  1.1802297e-05,  0.0000000e+00, ...,
          1.1802297e-05,  1.1802297e-05,  1.1802297e-05],
        [-5.1437846e-06, -5.1437846e-06, -1.0287569e-05, ...,
         -1.0287569e-05, -5.1437846e-06, -5.1437846e-06],
        [-1.3135620e-05, -1.3135620e-05, -9.8517148e-06, ...,
         -1.3135620e-05, -1.3135620e-05, -1.6419526e-05],
        ...,
        [ 1.3135620e-05,  1.3135620e-05,  9.8517148e-06, ...,
          1.9703430e-05,  1.9703430e-05,  1.9703430e-05],
        [ 1.5431353e-05,  2.0575138e-05,  1.5431353e-05, ...,
          2.0575138e-05,  2.5718922e-05,  2.0575138e-05],
        [ 4.7209189e-05,  4.7209189e-05,  4.7209189e-05, ...,
          4.7209189e-05,  3.5406894e-05,  3.5406894e-05]]], dtype=float32)
Coordinates:
  * time      (time) datetime64[ns] 2018-01-01 2018-01-02 ... 2018-03-12
  * lat       (lat) float32 88.542 86.6531 84.7532 ... -84.7532 -86.6531 -88.542
  * lon_left  (lon_left) float32 -0.9375 0.9375 2.8125 ... 355.3125 357.1875
    dxg       (lon_left, lat) float32 5295.579 12150.587 ... 12150.587 5295.579</pre><div class='xr-wrap' hidden><div class='xr-header'><div class='xr-obj-type'>xarray.DataArray</div><div class='xr-array-name'></div><ul class='xr-dim-list'><li><span class='xr-has-index'>time</span>: 71</li><li><span class='xr-has-index'>lat</span>: 94</li><li><span class='xr-has-index'>lon_left</span>: 192</li></ul></div><ul class='xr-sections'><li class='xr-section-item'><div class='xr-array-wrap'><input id='section-935031c4-71de-4369-a85e-523be3049d7f' class='xr-array-in' type='checkbox' checked><label for='section-935031c4-71de-4369-a85e-523be3049d7f' title='Show/hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-array-preview xr-preview'><span>0.0 0.0 0.0 0.0 ... 4.720919e-05 3.5406894e-05 3.5406894e-05</span></div><div class='xr-array-data'><pre>array([[[ 0.0000000e+00,  0.0000000e+00,  0.0000000e+00, ...,
          0.0000000e+00, -1.1802297e-05,  0.0000000e+00],
        [ 0.0000000e+00,  5.1437846e-06,  0.0000000e+00, ...,
          0.0000000e+00,  5.1437846e-06,  0.0000000e+00],
        [-9.8517148e-06, -1.3135620e-05, -9.8517148e-06, ...,
         -6.5678100e-06, -6.5678100e-06, -9.8517148e-06],
        ...,
        [ 6.5678100e-06,  6.5678100e-06,  6.5678100e-06, ...,
          0.0000000e+00,  3.2839050e-06,  6.5678100e-06],
        [ 1.5431353e-05,  2.0575138e-05,  1.5431353e-05, ...,
          1.5431353e-05,  1.5431353e-05,  1.5431353e-05],
        [ 4.7209189e-05,  3.5406894e-05,  4.7209189e-05, ...,
          4.7209189e-05,  3.5406894e-05,  4.7209189e-05]],

       [[ 0.0000000e+00, -1.1802297e-05,  0.0000000e+00, ...,
          0.0000000e+00, -2.3604594e-05,  0.0000000e+00],
        [-5.1437846e-06, -5.1437846e-06, -5.1437846e-06, ...,
         -5.1437846e-06, -5.1437846e-06,  0.0000000e+00],
        [-6.5678100e-06, -9.8517148e-06, -1.3135620e-05, ...,
         -6.5678100e-06, -6.5678100e-06, -1.3135620e-05],
...
        [ 1.3135620e-05,  1.6419526e-05,  9.8517148e-06, ...,
          2.2987335e-05,  1.6419526e-05,  1.9703430e-05],
        [ 2.5718922e-05,  2.0575138e-05,  1.5431353e-05, ...,
          2.5718922e-05,  2.0575138e-05,  2.0575138e-05],
        [ 3.5406894e-05,  3.5406894e-05,  3.5406894e-05, ...,
          4.7209189e-05,  4.7209189e-05,  3.5406894e-05]],

       [[ 0.0000000e+00,  1.1802297e-05,  0.0000000e+00, ...,
          1.1802297e-05,  1.1802297e-05,  1.1802297e-05],
        [-5.1437846e-06, -5.1437846e-06, -1.0287569e-05, ...,
         -1.0287569e-05, -5.1437846e-06, -5.1437846e-06],
        [-1.3135620e-05, -1.3135620e-05, -9.8517148e-06, ...,
         -1.3135620e-05, -1.3135620e-05, -1.6419526e-05],
        ...,
        [ 1.3135620e-05,  1.3135620e-05,  9.8517148e-06, ...,
          1.9703430e-05,  1.9703430e-05,  1.9703430e-05],
        [ 1.5431353e-05,  2.0575138e-05,  1.5431353e-05, ...,
          2.0575138e-05,  2.5718922e-05,  2.0575138e-05],
        [ 4.7209189e-05,  4.7209189e-05,  4.7209189e-05, ...,
          4.7209189e-05,  3.5406894e-05,  3.5406894e-05]]], dtype=float32)</pre></div></div></li><li class='xr-section-item'><input id='section-11773113-2459-4f18-a0a7-d85889008b7f' class='xr-section-summary-in' type='checkbox'  checked><label for='section-11773113-2459-4f18-a0a7-d85889008b7f' class='xr-section-summary' >Coordinates: <span>(4)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><ul class='xr-var-list'><li class='xr-var-item'><div class='xr-var-name'><span class='xr-has-index'>time</span></div><div class='xr-var-dims'>(time)</div><div class='xr-var-dtype'>datetime64[ns]</div><div class='xr-var-preview xr-preview'>2018-01-01 ... 2018-03-12</div><input id='attrs-6483e5e1-39d7-4997-bd66-4279c569f690' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-6483e5e1-39d7-4997-bd66-4279c569f690' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-0637b3ed-8e16-4f2a-a83c-310cf4c051eb' class='xr-var-data-in' type='checkbox'><label for='data-0637b3ed-8e16-4f2a-a83c-310cf4c051eb' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>Time</dd><dt><span>delta_t :</span></dt><dd>0000-00-01 00:00:00</dd><dt><span>standard_name :</span></dt><dd>time</dd><dt><span>axis :</span></dt><dd>T</dd><dt><span>avg_period :</span></dt><dd>0000-00-01 00:00:00</dd><dt><span>coordinate_defines :</span></dt><dd>start</dd><dt><span>actual_range :</span></dt><dd>[1910952. 1912632.]</dd></dl></div><div class='xr-var-data'><pre>array([&#x27;2018-01-01T00:00:00.000000000&#x27;, &#x27;2018-01-02T00:00:00.000000000&#x27;,
       &#x27;2018-01-03T00:00:00.000000000&#x27;, &#x27;2018-01-04T00:00:00.000000000&#x27;,
       &#x27;2018-01-05T00:00:00.000000000&#x27;, &#x27;2018-01-06T00:00:00.000000000&#x27;,
       &#x27;2018-01-07T00:00:00.000000000&#x27;, &#x27;2018-01-08T00:00:00.000000000&#x27;,
       &#x27;2018-01-09T00:00:00.000000000&#x27;, &#x27;2018-01-10T00:00:00.000000000&#x27;,
       &#x27;2018-01-11T00:00:00.000000000&#x27;, &#x27;2018-01-12T00:00:00.000000000&#x27;,
       &#x27;2018-01-13T00:00:00.000000000&#x27;, &#x27;2018-01-14T00:00:00.000000000&#x27;,
       &#x27;2018-01-15T00:00:00.000000000&#x27;, &#x27;2018-01-16T00:00:00.000000000&#x27;,
       &#x27;2018-01-17T00:00:00.000000000&#x27;, &#x27;2018-01-18T00:00:00.000000000&#x27;,
       &#x27;2018-01-19T00:00:00.000000000&#x27;, &#x27;2018-01-20T00:00:00.000000000&#x27;,
       &#x27;2018-01-21T00:00:00.000000000&#x27;, &#x27;2018-01-22T00:00:00.000000000&#x27;,
       &#x27;2018-01-23T00:00:00.000000000&#x27;, &#x27;2018-01-24T00:00:00.000000000&#x27;,
       &#x27;2018-01-25T00:00:00.000000000&#x27;, &#x27;2018-01-26T00:00:00.000000000&#x27;,
       &#x27;2018-01-27T00:00:00.000000000&#x27;, &#x27;2018-01-28T00:00:00.000000000&#x27;,
       &#x27;2018-01-29T00:00:00.000000000&#x27;, &#x27;2018-01-30T00:00:00.000000000&#x27;,
       &#x27;2018-01-31T00:00:00.000000000&#x27;, &#x27;2018-02-01T00:00:00.000000000&#x27;,
       &#x27;2018-02-02T00:00:00.000000000&#x27;, &#x27;2018-02-03T00:00:00.000000000&#x27;,
       &#x27;2018-02-04T00:00:00.000000000&#x27;, &#x27;2018-02-05T00:00:00.000000000&#x27;,
       &#x27;2018-02-06T00:00:00.000000000&#x27;, &#x27;2018-02-07T00:00:00.000000000&#x27;,
       &#x27;2018-02-08T00:00:00.000000000&#x27;, &#x27;2018-02-09T00:00:00.000000000&#x27;,
       &#x27;2018-02-10T00:00:00.000000000&#x27;, &#x27;2018-02-11T00:00:00.000000000&#x27;,
       &#x27;2018-02-12T00:00:00.000000000&#x27;, &#x27;2018-02-13T00:00:00.000000000&#x27;,
       &#x27;2018-02-14T00:00:00.000000000&#x27;, &#x27;2018-02-15T00:00:00.000000000&#x27;,
       &#x27;2018-02-16T00:00:00.000000000&#x27;, &#x27;2018-02-17T00:00:00.000000000&#x27;,
       &#x27;2018-02-18T00:00:00.000000000&#x27;, &#x27;2018-02-19T00:00:00.000000000&#x27;,
       &#x27;2018-02-20T00:00:00.000000000&#x27;, &#x27;2018-02-21T00:00:00.000000000&#x27;,
       &#x27;2018-02-22T00:00:00.000000000&#x27;, &#x27;2018-02-23T00:00:00.000000000&#x27;,
       &#x27;2018-02-24T00:00:00.000000000&#x27;, &#x27;2018-02-25T00:00:00.000000000&#x27;,
       &#x27;2018-02-26T00:00:00.000000000&#x27;, &#x27;2018-02-27T00:00:00.000000000&#x27;,
       &#x27;2018-02-28T00:00:00.000000000&#x27;, &#x27;2018-03-01T00:00:00.000000000&#x27;,
       &#x27;2018-03-02T00:00:00.000000000&#x27;, &#x27;2018-03-03T00:00:00.000000000&#x27;,
       &#x27;2018-03-04T00:00:00.000000000&#x27;, &#x27;2018-03-05T00:00:00.000000000&#x27;,
       &#x27;2018-03-06T00:00:00.000000000&#x27;, &#x27;2018-03-07T00:00:00.000000000&#x27;,
       &#x27;2018-03-08T00:00:00.000000000&#x27;, &#x27;2018-03-09T00:00:00.000000000&#x27;,
       &#x27;2018-03-10T00:00:00.000000000&#x27;, &#x27;2018-03-11T00:00:00.000000000&#x27;,
       &#x27;2018-03-12T00:00:00.000000000&#x27;], dtype=&#x27;datetime64[ns]&#x27;)</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span class='xr-has-index'>lat</span></div><div class='xr-var-dims'>(lat)</div><div class='xr-var-dtype'>float32</div><div class='xr-var-preview xr-preview'>88.542 86.6531 ... -86.6531 -88.542</div><input id='attrs-1b39efa4-2c6d-41a4-8483-3a0b50ce9c91' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-1b39efa4-2c6d-41a4-8483-3a0b50ce9c91' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-e1010945-a27d-48c5-89ac-cd73475530bb' class='xr-var-data-in' type='checkbox'><label for='data-e1010945-a27d-48c5-89ac-cd73475530bb' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>units :</span></dt><dd>degrees_north</dd><dt><span>actual_range :</span></dt><dd>[ 88.542 -88.542]</dd><dt><span>long_name :</span></dt><dd>Latitude</dd><dt><span>standard_name :</span></dt><dd>latitude</dd><dt><span>axis :</span></dt><dd>Y</dd></dl></div><div class='xr-var-data'><pre>array([ 88.542   ,  86.6531  ,  84.7532  ,  82.8508  ,  80.9473  ,  79.0435  ,
        77.1394  ,  75.2351  ,  73.3307  ,  71.4262  ,  69.5217  ,  67.6171  ,
        65.7125  ,  63.8079  ,  61.9033  ,  59.9986  ,  58.0939  ,  56.1893  ,
        54.2846  ,  52.3799  ,  50.4752  ,  48.5705  ,  46.6658  ,  44.7611  ,
        42.8564  ,  40.9517  ,  39.047   ,  37.1422  ,  35.2375  ,  33.3328  ,
        31.4281  ,  29.5234  ,  27.6186  ,  25.7139  ,  23.8092  ,  21.9044  ,
        19.9997  ,  18.095   ,  16.1902  ,  14.2855  ,  12.3808  ,  10.47604 ,
         8.57131 ,   6.66657 ,   4.76184 ,   2.8571  ,   0.952368,  -0.952368,
        -2.8571  ,  -4.76184 ,  -6.66657 ,  -8.57131 , -10.47604 , -12.3808  ,
       -14.2855  , -16.1902  , -18.095   , -19.9997  , -21.9044  , -23.8092  ,
       -25.7139  , -27.6186  , -29.5234  , -31.4281  , -33.3328  , -35.2375  ,
       -37.1422  , -39.047   , -40.9517  , -42.8564  , -44.7611  , -46.6658  ,
       -48.5705  , -50.4752  , -52.3799  , -54.2846  , -56.1893  , -58.0939  ,
       -59.9986  , -61.9033  , -63.8079  , -65.7125  , -67.6171  , -69.5217  ,
       -71.4262  , -73.3307  , -75.2351  , -77.1394  , -79.0435  , -80.9473  ,
       -82.8508  , -84.7532  , -86.6531  , -88.542   ], dtype=float32)</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span class='xr-has-index'>lon_left</span></div><div class='xr-var-dims'>(lon_left)</div><div class='xr-var-dtype'>float32</div><div class='xr-var-preview xr-preview'>-0.9375 0.9375 ... 357.1875</div><input id='attrs-5ec63d6c-b7c3-48c8-870f-ef48985b534d' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-5ec63d6c-b7c3-48c8-870f-ef48985b534d' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-6fe9cb60-f842-4201-a08d-2d2d057a3829' class='xr-var-data-in' type='checkbox'><label for='data-6fe9cb60-f842-4201-a08d-2d2d057a3829' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>axis :</span></dt><dd>X</dd><dt><span>c_grid_axis_shift :</span></dt><dd>-0.5</dd></dl></div><div class='xr-var-data'><pre>array([ -0.9375,   0.9375,   2.8125,   4.6875,   6.5625,   8.4375,  10.3125,
        12.1875,  14.0625,  15.9375,  17.8125,  19.6875,  21.5625,  23.4375,
        25.3125,  27.1875,  29.0625,  30.9375,  32.8125,  34.6875,  36.5625,
        38.4375,  40.3125,  42.1875,  44.0625,  45.9375,  47.8125,  49.6875,
        51.5625,  53.4375,  55.3125,  57.1875,  59.0625,  60.9375,  62.8125,
        64.6875,  66.5625,  68.4375,  70.3125,  72.1875,  74.0625,  75.9375,
        77.8125,  79.6875,  81.5625,  83.4375,  85.3125,  87.1875,  89.0625,
        90.9375,  92.8125,  94.6875,  96.5625,  98.4375, 100.3125, 102.1875,
       104.0625, 105.9375, 107.8125, 109.6875, 111.5625, 113.4375, 115.3125,
       117.1875, 119.0625, 120.9375, 122.8125, 124.6875, 126.5625, 128.4375,
       130.3125, 132.1875, 134.0625, 135.9375, 137.8125, 139.6875, 141.5625,
       143.4375, 145.3125, 147.1875, 149.0625, 150.9375, 152.8125, 154.6875,
       156.5625, 158.4375, 160.3125, 162.1875, 164.0625, 165.9375, 167.8125,
       169.6875, 171.5625, 173.4375, 175.3125, 177.1875, 179.0625, 180.9375,
       182.8125, 184.6875, 186.5625, 188.4375, 190.3125, 192.1875, 194.0625,
       195.9375, 197.8125, 199.6875, 201.5625, 203.4375, 205.3125, 207.1875,
       209.0625, 210.9375, 212.8125, 214.6875, 216.5625, 218.4375, 220.3125,
       222.1875, 224.0625, 225.9375, 227.8125, 229.6875, 231.5625, 233.4375,
       235.3125, 237.1875, 239.0625, 240.9375, 242.8125, 244.6875, 246.5625,
       248.4375, 250.3125, 252.1875, 254.0625, 255.9375, 257.8125, 259.6875,
       261.5625, 263.4375, 265.3125, 267.1875, 269.0625, 270.9375, 272.8125,
       274.6875, 276.5625, 278.4375, 280.3125, 282.1875, 284.0625, 285.9375,
       287.8125, 289.6875, 291.5625, 293.4375, 295.3125, 297.1875, 299.0625,
       300.9375, 302.8125, 304.6875, 306.5625, 308.4375, 310.3125, 312.1875,
       314.0625, 315.9375, 317.8125, 319.6875, 321.5625, 323.4375, 325.3125,
       327.1875, 329.0625, 330.9375, 332.8125, 334.6875, 336.5625, 338.4375,
       340.3125, 342.1875, 344.0625, 345.9375, 347.8125, 349.6875, 351.5625,
       353.4375, 355.3125, 357.1875], dtype=float32)</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>dxg</span></div><div class='xr-var-dims'>(lon_left, lat)</div><div class='xr-var-dtype'>float32</div><div class='xr-var-preview xr-preview'>5295.579 12150.587 ... 5295.579</div><input id='attrs-eaf88e20-2021-4d1b-8fa2-a0ae4c7fbc33' class='xr-var-attrs-in' type='checkbox' disabled><label for='attrs-eaf88e20-2021-4d1b-8fa2-a0ae4c7fbc33' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-e0b16be8-403d-4ed2-8641-dbaed30d24df' class='xr-var-data-in' type='checkbox'><label for='data-e0b16be8-403d-4ed2-8641-dbaed30d24df' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'></dl></div><div class='xr-var-data'><pre>array([[ 5295.579, 12150.587, 19032.219, ..., 19032.219, 12150.587,
         5295.579],
       [ 5295.579, 12150.587, 19032.219, ..., 19032.219, 12150.587,
         5295.579],
       [ 5295.579, 12150.587, 19032.219, ..., 19032.219, 12150.587,
         5295.579],
       ...,
       [ 5295.579, 12150.587, 19032.219, ..., 19032.219, 12150.587,
         5295.579],
       [ 5295.579, 12150.587, 19032.219, ..., 19032.219, 12150.587,
         5295.579],
       [ 5295.579, 12150.587, 19032.219, ..., 19032.219, 12150.587,
         5295.579]], dtype=float32)</pre></div></li></ul></div></li><li class='xr-section-item'><input id='section-4f0a9f53-a014-4521-9a0c-7118b2b0cf05' class='xr-section-summary-in' type='checkbox' disabled ><label for='section-4f0a9f53-a014-4521-9a0c-7118b2b0cf05' class='xr-section-summary'  title='Expand/collapse section'>Attributes: <span>(0)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><dl class='xr-attrs'></dl></div></li></ul></div></div></div>
</div>
<p>The values of the gradient are correctly located on the cell boundary on the x-axis and on the cell center in the y-axis</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[15]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="kn">import</span> <span class="nn">cartopy.crs</span> <span class="k">as</span> <span class="nn">ccrs</span>

<span class="n">fig</span><span class="p">,</span> <span class="n">axarr</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">ncols</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">nrows</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">figsize</span><span class="o">=</span><span class="p">[</span><span class="mi">16</span><span class="p">,</span><span class="mi">20</span><span class="p">],</span>
                               <span class="n">subplot_kw</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">projection</span><span class="o">=</span><span class="n">ccrs</span><span class="o">.</span><span class="n">Orthographic</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="mi">30</span><span class="p">)))</span>

<span class="k">for</span> <span class="n">ti</span><span class="p">,</span><span class="n">tt</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">30</span><span class="p">,</span> <span class="mi">10</span><span class="p">)):</span>
    <span class="n">ax1</span> <span class="o">=</span> <span class="n">axarr</span><span class="p">[</span><span class="n">ti</span><span class="p">,</span><span class="mi">0</span><span class="p">]</span>
    <span class="n">ax2</span> <span class="o">=</span> <span class="n">axarr</span><span class="p">[</span><span class="n">ti</span><span class="p">,</span><span class="mi">1</span><span class="p">]</span>
    <span class="n">time</span> <span class="o">=</span> <span class="n">ds_full</span><span class="o">.</span><span class="n">time</span><span class="o">.</span><span class="n">isel</span><span class="p">(</span><span class="n">time</span><span class="o">=</span><span class="n">tt</span><span class="p">)</span><span class="o">.</span><span class="n">data</span>
    <span class="n">ds_full</span><span class="o">.</span><span class="n">uwnd</span><span class="o">.</span><span class="n">isel</span><span class="p">(</span><span class="n">time</span><span class="o">=</span><span class="n">tt</span><span class="p">)</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">ax</span><span class="o">=</span><span class="n">ax1</span><span class="p">,</span> <span class="n">transform</span><span class="o">=</span><span class="n">ccrs</span><span class="o">.</span><span class="n">PlateCarree</span><span class="p">(),</span><span class="n">robust</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

    <span class="n">du_dx</span><span class="o">.</span><span class="n">isel</span><span class="p">(</span><span class="n">time</span><span class="o">=</span><span class="n">tt</span><span class="p">)</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">ax</span><span class="o">=</span><span class="n">ax2</span><span class="p">,</span> <span class="n">transform</span><span class="o">=</span><span class="n">ccrs</span><span class="o">.</span><span class="n">PlateCarree</span><span class="p">(),</span> <span class="n">robust</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

    <span class="n">ax1</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s1">&#39;Zonal Surface Wind </span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span><span class="k">time</span>)
    <span class="n">ax2</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s1">&#39;Zonal Gradient of Zonal Surface Wind </span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span><span class="k">time</span>)


    <span class="k">for</span> <span class="n">ax</span> <span class="ow">in</span> <span class="p">[</span><span class="n">ax1</span><span class="p">,</span> <span class="n">ax2</span><span class="p">]:</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">set_global</span><span class="p">();</span> <span class="n">ax</span><span class="o">.</span><span class="n">coastlines</span><span class="p">();</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area stderr docutils container">
<div class="highlight"><pre>
/srv/conda/envs/notebook/lib/python3.8/site-packages/cartopy/io/__init__.py:260: DownloadWarning: Downloading: https://naciscdn.org/naturalearth/110m/physical/ne_110m_coastline.zip
  warnings.warn(&#39;Downloading: {}&#39;.format(url), DownloadWarning)
</pre></div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../../../_images/repos_xgcm_xgcm-examples_05_autogenerate_33_1.png" src="../../../_images/repos_xgcm_xgcm-examples_05_autogenerate_33_1.png" />
</div>
</div>
<p>The resulting gradient is correctly computed across the periodic (x-axis) boundary.</p>
</div>
<div class="section" id="Area-weighted-average">
<h3>Area weighted average<a class="headerlink" href="#Area-weighted-average" title="Permalink to this headline">¶</a></h3>
<p>By using the approximated cell area, we can easily compute the area weighted average of the zonal wind.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[16]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">u</span> <span class="o">=</span> <span class="n">ds_full</span><span class="o">.</span><span class="n">uwnd</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="s1">&#39;time&#39;</span><span class="p">)</span>

<span class="n">u_mean</span> <span class="o">=</span> <span class="n">u</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="s1">&#39;lat&#39;</span><span class="p">)</span>
<span class="n">u_mean_weighted</span> <span class="o">=</span> <span class="p">(</span><span class="n">u</span> <span class="o">*</span> <span class="n">u</span><span class="o">.</span><span class="n">area_c</span><span class="p">)</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="s1">&#39;lat&#39;</span><span class="p">)</span> <span class="o">/</span> <span class="p">(</span><span class="n">u</span><span class="o">.</span><span class="n">area_c</span><span class="p">)</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="s1">&#39;lat&#39;</span><span class="p">)</span>


<span class="n">u_mean</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">label</span><span class="o">=</span><span class="s1">&#39;unweighted mean&#39;</span><span class="p">)</span>
<span class="n">u_mean_weighted</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">label</span><span class="o">=</span><span class="s1">&#39;area weighted mean&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">legend</span><span class="p">()</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">&#39;zonal wind [m/s]&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">gca</span><span class="p">()</span><span class="o">.</span><span class="n">autoscale</span><span class="p">(</span><span class="s1">&#39;tight&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../../../_images/repos_xgcm_xgcm-examples_05_autogenerate_36_0.png" src="../../../_images/repos_xgcm_xgcm-examples_05_autogenerate_36_0.png" />
</div>
</div>
<p>Thes two lines show the importance of applying a weighted mean, when the grid spacing is irregular (e.g. datasets gridded on a regular lat-lon grid).</p>
</div>
</div>
</div>


    </div>
      
  </div>
</div>
<footer class="footer">
  <div class="container">
    <p class="pull-right">
      <a href="#">Back to top</a>
      
    </p>
    <p>
        &copy; Copyright 2020, Pangeo Developers.<br/>
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 3.4.3.<br/>
    </p>
  </div>
</footer>
  </body>
</html>